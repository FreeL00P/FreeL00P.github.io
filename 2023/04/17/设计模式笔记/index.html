

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="FreeL00P">
  <meta name="keywords" content="">
  
    <meta name="description" content="Java设计模式一、设计模式七大原则1、单一职责原则 介绍： 对于类来说，每个类都应该只负责一个职责。如果A类负责两个不同的职责：职责1，职责2，当职责1的需求变更要改变A时，可能造成职责2执行错误，所以需要将类A的粒度分解。  降低类的复杂度，一个类只负责一个功能  提高类的可读性，可维护性  降低变更引起的风险  通常情况下，我们应当遵守单一职责原则，只能逻辑足够简单，才可以在代码级违反单一职">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式笔记">
<meta property="og:url" content="http://freel00p.github.io/2023/04/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="跳动的音符">
<meta property="og:description" content="Java设计模式一、设计模式七大原则1、单一职责原则 介绍： 对于类来说，每个类都应该只负责一个职责。如果A类负责两个不同的职责：职责1，职责2，当职责1的需求变更要改变A时，可能造成职责2执行错误，所以需要将类A的粒度分解。  降低类的复杂度，一个类只负责一个功能  提高类的可读性，可维护性  降低变更引起的风险  通常情况下，我们应当遵守单一职责原则，只能逻辑足够简单，才可以在代码级违反单一职">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230410100333803.png">
<meta property="article:published_time" content="2023-04-17T12:44:59.000Z">
<meta property="article:modified_time" content="2023-06-01T12:00:45.840Z">
<meta property="article:author" content="FreeL00P">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230410100333803.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>设计模式笔记 - 跳动的音符</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"freel00p.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>自由频率</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://www.dmoe.cc/random.php') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="设计模式笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        FreeL00P
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-17 20:44" pubdate>
          2023年4月17日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          56k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          468 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">设计模式笔记</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Java设计模式"><a href="#Java设计模式" class="headerlink" title="Java设计模式"></a>Java设计模式</h1><h2 id="一、设计模式七大原则"><a href="#一、设计模式七大原则" class="headerlink" title="一、设计模式七大原则"></a>一、设计模式七大原则</h2><h4 id="1、单一职责原则"><a href="#1、单一职责原则" class="headerlink" title="1、单一职责原则"></a>1、单一职责原则</h4><ul>
<li><p>介绍：</p>
<p>对于类来说，每个类都应该只负责一个职责。如果A类负责两个不同的职责：职责1，职责2，当职责1的需求变更要改变A时，可能造成职责2执行错误，所以需要将类A的粒度分解。</p>
</li>
<li><p>降低类的复杂度，一个类只负责一个功能</p>
</li>
<li><p>提高类的可读性，可维护性</p>
</li>
<li><p>降低变更引起的风险</p>
</li>
<li><p>通常情况下，我们应当遵守单一职责原则，只能逻辑足够简单，才可以在代码级违反单一职责原则，只有类中的方法足够少，可以才方法级别保持单一职责原则。</p>
</li>
</ul>
<h4 id="2、接口隔离原则"><a href="#2、接口隔离原则" class="headerlink" title="2、接口隔离原则"></a>2、接口隔离原则</h4><ul>
<li>将接口拆分为独立的几个接口，这里我们拆分为3个，</li>
<li>类A和类C分别于他们需要的接口建立关系</li>
<li>也就是采用接口隔离原则</li>
</ul>
<h4 id="3、依赖倒转原则"><a href="#3、依赖倒转原则" class="headerlink" title="3、依赖倒转原则"></a>3、依赖倒转原则</h4><ul>
<li>高层模块不应该依赖低层模块，二者都应该依赖其抽象</li>
<li>抽象不应该依赖其细节，细节应该依赖抽象</li>
<li>依赖倒转的中心思想的面向接口编程</li>
<li>依赖倒转原则是基于这样的设计理念，相对于细节的多变性，抽象的对象要稳定的多，</li>
<li>java中抽象的是指接口或者抽象类，细节就是具体的实现类</li>
<li>使用接口或者抽象类的目的是制定好规范，而不涉及任何具体的操作，把展现细节的任务交给他们的实现类来做</li>
<li>注意<ul>
<li>低层模块尽量都要有抽象类或接口，或者都有，程序稳定性更好</li>
<li>变量的声明类型尽量是抽象类或者接口。这样我们的变量引用和实际对象间，就存在一个缓存区，利于程序扩展和优化</li>
<li>遵循里氏替换原则</li>
</ul>
</li>
</ul>
<h4 id="4、里氏替换原则"><a href="#4、里氏替换原则" class="headerlink" title="4、里氏替换原则"></a>4、里氏替换原则</h4><ul>
<li>这条原则是针对继承关系的，它强调子类型必须能够替换掉其父类型，并且调用者不需要知道实际使用的是子类型还是父类型，程序能够正确运行。</li>
<li>子类必须实现父类的所有抽象方法，不能删除、修改、增加父类的方法，也不能改变父类方法的返回值类型和方法签名的参数类型</li>
<li>子类可以有自己的方法和属性</li>
<li>子类中的方法应该与父类中的方法有相同的预期后置条件（post-conditions），即方法的执行结果应该符合其描述的结果</li>
<li>子类中的方法不能抛出异常，也不能抛出超出父类方法范围的异常。</li>
</ul>
<h4 id="5、开闭原则"><a href="#5、开闭原则" class="headerlink" title="5、开闭原则"></a>5、开闭原则</h4><ul>
<li>简单来说，开闭原则要求软件设计应该是可以扩展的，但是不应该修改现有的代码。这样做能够使软件更易于维护、扩展和升级，并且可以减少因为修改代码而引入新问题的风险</li>
<li>抽象化：使用接口或抽象类等抽象化的方式，将具体的实现和抽象分离，并且将抽象设计得足够通用，以便能够适应未来的需求变化。</li>
<li>封装变化：将不同的变化隔离开来，确保每个变化只影响相应的模块。这样做可以减少变化的影响范围，并且可以提高代码的内聚性。</li>
<li>利用多态：利用多态性来实现开闭原则，即将变化的实现部分抽象成接口或抽象类，而将具体的实现放在实现子类中，通过面向父类编程，可以让程序更易于扩展和升级。</li>
</ul>
<h4 id="6、迪米特原则"><a href="#6、迪米特原则" class="headerlink" title="6、迪米特原则"></a>6、迪米特原则</h4><ul>
<li>为了遵守迪米特法则，我们需要：<ul>
<li>将对象的设计和实现尽可能简单，避免出现类之间交互过于复杂的情况。</li>
<li>抽象出适当的接口，尽量减少对象之间直接的依赖关系，而是通过接口进行交互。</li>
<li>将每个对象的职责尽可能的分离，使得每个对象只关注自己的核心任务，而不需要了解依赖对象的具体实现。</li>
<li>在设计过程中，保持代码的清晰简洁，让代码易于理解和维护。</li>
</ul>
</li>
<li>迪米特法则的核心思想是“减少耦合性，增加内聚性”，即在一个系统中，对象之间的交互应该尽可能简单，不需要了解太多其他对象的内部实现。也就是说，一个对象应该对其他对象了解得最少。</li>
<li>迪米特法则可以有效的减少代码的耦合性，提高代码的内聚性和可维护性。同时，它也能够促进面向对象设计中的单一职责原则和开闭原则的实践。</li>
</ul>
<h4 id="7、合成复用原则"><a href="#7、合成复用原则" class="headerlink" title="7、合成复用原则"></a>7、合成复用原则</h4><ul>
<li>合成复用原则的核心思想是“优先使用对象组合，而不是继承关系来实现代码的重用”。</li>
<li>为了遵循合成复用原则，我们需要：<ul>
<li>尽量使用对象组合来构建复杂的对象，而不是使用类继承。</li>
<li>在设计时优先考虑对象间的组合关系，而不是类之间的继承关系。</li>
<li>在需要重用某些功能的时候，尽量使用对象组合来实现，而不是通过类的继承。</li>
<li>设计类时尽量保持职责单一，每个类负责一项任务，而不是实现多项任务。</li>
<li>通过使用合成复用原则，可以大大提高代码的可维护性、复用性和扩展性，同时减少代码的耦合性和依赖性。此外，还可以避免由于类继承关系过于复杂而导致的代码难以理解和维护的问题。</li>
</ul>
</li>
</ul>
<h2 id="二、设计模式类型"><a href="#二、设计模式类型" class="headerlink" title="二、设计模式类型"></a>二、设计模式类型</h2><h4 id="1-创建型模式"><a href="#1-创建型模式" class="headerlink" title="1. 创建型模式"></a>1. 创建型模式</h4><ul>
<li>单例模式 - 抽象工厂模式 - 原型模式</li>
<li>建造者模式 - 工厂模式</li>
</ul>
<h4 id="2-结构型模式"><a href="#2-结构型模式" class="headerlink" title="2. 结构型模式"></a>2. 结构型模式</h4><ul>
<li>适配器模式 - 桥接模式 - 装饰模式</li>
<li>组合模式 - 外观模式 - 享元模式</li>
<li>代理模式</li>
</ul>
<h4 id="3-行为型模式"><a href="#3-行为型模式" class="headerlink" title="3. 行为型模式"></a>3. 行为型模式</h4><ul>
<li>模板方法模式 - 命令模式 - 访问者模式</li>
<li>迭代器模式 - 观察者模式 - 中介者模式</li>
<li>备忘录模式- 解释器模式 - 状态模式 </li>
<li>策略模式 - 责任链模式</li>
</ul>
<h2 id="三、-设计模式"><a href="#三、-设计模式" class="headerlink" title="三、 设计模式"></a>三、 设计模式</h2><h3 id="1、单例模式"><a href="#1、单例模式" class="headerlink" title="1、单例模式"></a>1、单例模式</h3><ul>
<li><p>饿汉式</p>
<figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">饿汉式是一种比较简单的单例模式实现方式，其核心思想是在类加载的时候就创建并初始化唯一的实例，<br>避免了多线程环境下可能出现的线程安全问题。<br>在某些情况下可能会导致资源浪费，即如果 <span class="hljs-keyword">INSTANCE </span>并未被使用到，<br>但是它却会在类加载时被创建出来并占用一定的内存空间。<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><p>静态变量实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Singleton</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> {}<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {<br>      <span class="hljs-keyword">return</span> INSTANCE;<br>  }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>静态代码块形式</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Singleton INSTANCE;<br><br>    <span class="hljs-keyword">static</span> {<br>        INSTANCE = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> {}<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> INSTANCE;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>枚举式</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Singleton</span> {<br>    INSTANCE;<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p>懒汉式</p>
<p>其核心思想是在需要获取实例时才进行对象的实例化。相比于饿汉式，懒汉式的实现需要注意多线		程环境下的线程安全问题。<br>在懒汉式的实现过程中，可以使用一个私有的静态变量来存储该实例，但是不进行初始化，直到第一次使用该实例时再进行初始化，<br>并返回该实例的引用。为了确保多线程环境下的线程安全问题，可以使用 synchronized 关键字或者双重检测锁来实现线程安全的访问。</p>
<ul>
<li><p>线程不安全的懒汉式  </p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">在第一次使用时才进行实例化，但是没有考虑多线程下的并发问题，有可能会导致多个线程在同一时刻创建多个实例。如果并发访问情况下极容易出现线程安全问题，因此不推荐使用。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;<br>	<br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> {}<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {<br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>        }<br>        <span class="hljs-keyword">return</span> instance;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>线程安全的懒汉式</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">线程安全的懒汉式指的是，使用双重检查锁（Double-Check Locking，DCL）的方式，即在保证线程安全的前提下，尽量避免不必要的锁竞争和实例化操作。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">static</span> Singleton instance;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> {}<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">synchronized</span> (Singleton.class) {<br>                <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {<br>                    instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>                }<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> instance;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>内部类懒汉式</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">使用内部类的方式实现线程安全的懒汉式单例模式。在内部类中创建单例对象进行初始化，通过静态内部类的特性来保证线程安全和唯一性。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> {}<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonHolder</span> {<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Singleton</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> SingletonHolder.INSTANCE;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure>

<p>无论使用哪种方式，懒汉式单例模式都是在第一次使用时才进行实例化，避免了在类加载时就创建单例对象所带来的性能问题。但是需要注意，第一种方式并不能保证线程安全，因此不推荐使用。其他两种方式能够保证线程安全且高效，因此推荐使用。</p>
</li>
</ul>
</li>
</ul>
<h3 id="2、简单工厂模式"><a href="#2、简单工厂模式" class="headerlink" title="2、简单工厂模式"></a>2、简单工厂模式</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">在简单工厂模式中，包含一个工厂类 Factory，该类负责创建对应产品的对象。工厂类中通常会包括一个静态方法，该方法根据不同的参数生成不同的产品实例。这样，客户端只需要知道产品的类型，而不需要关心产品的创建过程。</span><br><span class="hljs-comment">*/</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">()</span>;<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteProduct1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Product</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"Product 1 used."</span>);<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteProduct2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Product</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"Product 2 used."</span>);<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleFactory</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Product <span class="hljs-title function_">createProduct</span><span class="hljs-params">(<span class="hljs-type">int</span> type)</span> {<br>        <span class="hljs-keyword">switch</span> (type) {<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span> :<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteProduct1</span>();<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span> :<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteProduct2</span>();<br>            <span class="hljs-keyword">default</span> :<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Invalid product type."</span>);<br>        }<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> SimpleFactory.createProduct(<span class="hljs-number">1</span>);<br>        product.use();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>简单工厂模式的主要特点是通过一个工厂方法来创建对象，而不是通过类的构造器。</p>
<ul>
<li>使用简单工厂模式的优点在于：<ul>
<li>客户端代码与产品对象的创建过程分离，降低耦合度。</li>
<li>在新增产品时，仅需适当修改工厂类即可，无需修改客户端代码，提高系统的可扩展性。</li>
<li>通过创建工厂方法，可以将对象创建的粒度进行统一管理，提高系统的可维护性。</li>
</ul>
</li>
<li>简单工厂模式的缺点在于：<ul>
<li>当新增产品时，需要修改工厂类的代码，不符合开闭原则。</li>
<li>工厂类会承担较多的职责，有可能会变得复杂</li>
</ul>
</li>
</ul>
<h3 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h3><ul>
<li><p>工厂方法模式是一种创建型设计模式，它提供了一种创建对象的方法，将对象的创建委托给其子类来完成。借助工厂方法模式，我们可以将对象的创建和使用分开，从而降低系统耦合度</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">在工厂方法模式中，我们定义一个抽象的工厂类，其中包含一个创建产品的抽象方法。</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> {<br>    <span class="hljs-comment">//定义一个抽象方法，createPizza,让各个子类自己实现</span><br>    <span class="hljs-keyword">abstract</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">()</span>{<br>        String orderType;<span class="hljs-comment">//订购披萨的类型</span><br>        <span class="hljs-keyword">do</span> {<br>            orderType = getType();<br>            <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> createPizza(orderType);<br>            <span class="hljs-comment">//输出披萨制作工厂</span><br>            pizza.prepare();<br>            pizza.bake();<br>            pizza.cut();<br>            pizza.box();<br>        }<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>);<br><br>    }<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strIn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>            System.out.println(<span class="hljs-string">"披萨种类:"</span>);<br>            <span class="hljs-keyword">return</span> strIn.readLine();<br>        }<span class="hljs-keyword">catch</span> (Exception e){<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<br>        }<br>    }<br>}<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">具体的产品由工厂的子类来创建，每个工厂子类都实现了抽象工厂类中的抽象方法，用于创建相应的产品</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span>{<br>    <span class="hljs-meta">@Override</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> {<br>        System.out.println(<span class="hljs-string">"制作北京披萨"</span>);<br>        Pizza pizza=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"cheese"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"pepper"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>        }<br>        <span class="hljs-keyword">return</span> pizza;<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LDOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span>{<br>    <span class="hljs-meta">@Override</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> {<br>        System.out.println(<span class="hljs-string">"制作伦敦披萨"</span>);<br>        Pizza pizza=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"cheese"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LDCheesePizza</span>();<br>        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"pepper"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LDPepperPizza</span>();<br>        }<br>        <span class="hljs-keyword">return</span> pizza;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PizzaStore</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建北京口味的各种pizza</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">location</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in).next();<br>        <span class="hljs-keyword">if</span> (location.equals(<span class="hljs-string">"bj"</span>)) {<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJOrderPizza</span>();<br>        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (location.equals(<span class="hljs-string">"ld"</span>)){<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LDOrderPizza</span>();<br>        }<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>这种设计模式能够实现代码的可扩展性，当我们需要新增一种产品时，只需要增加相应的产品子类及其工厂子类即可，对现有代码不会造成影响。</p>
</li>
<li><p>工厂方法模式的优点包括封装了对象的创建，使得客户端无需关心对象的具体创建过程，增加了系统的灵活性和可扩展性，同时降低了系统的耦合程度。</p>
</li>
<li><p>不足之处是如果工厂类较多，会导致代码复杂度增加。此外，由于工厂方法模式使用了继承来完成对象的创建，因此会增加系统的类的个数和结构的复杂度。</p>
</li>
</ul>
<h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><ul>
<li><p>抽象工厂模式是一种创建型设计模式，它提供了一个接口，让客户端能够创建一系列相关或依赖对象，而无需指定它们的具体类。抽象工厂模式是工厂方法模式的一种变体，它使用一组相关的工厂来创建对象，这些工厂被称为“抽象工厂”。</p>
</li>
<li><p>在抽象工厂模式中，抽象工厂定义了一个接口，用于创建一组相关对象，而具体工厂则实现这个接口，并创建具体的对象。每个工厂都可以创建一组相似的对象，但这些对象可能在不同的上下文中使用，因此它们具有不同的具体表现形式。</p>
</li>
<li><p>使用抽象工厂模式可以隐藏对象的具体实现细节，只披露接口，从而简化代码，提高系统的可扩展性和灵活性。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AbsFactory</span> {<br>    <span class="hljs-comment">//让下面的工厂子类来具体实现</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AbsFactory</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> {<br>        System.out.println(<span class="hljs-string">"制作北京披萨"</span>);<br>        Pizza pizza=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"cheese"</span>)){<br>            pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"pepper"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>        }<br>        <span class="hljs-keyword">return</span> pizza;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LDFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AbsFactory</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> {<br>        System.out.println(<span class="hljs-string">"制作伦敦披萨"</span>);<br>        Pizza pizza=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"cheese"</span>)){<br>            pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LDCheesePizza</span>();<br>        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">"pepper"</span>)){<br>            pizza=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LDPepperPizza</span>();<br>        }<br>        <span class="hljs-keyword">return</span> pizza;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> {<br>    AbsFactory absFactory;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">(AbsFactory absFactory)</span> {<br>        setAbsFactory(absFactory);<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAbsFactory</span><span class="hljs-params">(AbsFactory absFactory)</span> {<br>        Pizza pizza=<span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">orderType</span> <span class="hljs-operator">=</span><span class="hljs-string">""</span>;<br>        <span class="hljs-built_in">this</span>.absFactory=absFactory;<br>        <span class="hljs-keyword">do</span> {<br>            orderType=<span class="hljs-built_in">this</span>.getType();<br>            pizza=absFactory.createPizza(orderType);<br>            <span class="hljs-keyword">if</span> (pizza!=<span class="hljs-literal">null</span>){<br>                pizza.prepare();<br>                pizza.bake();<br>                pizza.cut();<br>                pizza.box();<br>            }<br>        }<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>    }<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strIn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>            System.out.println(<span class="hljs-string">"披萨种类:"</span>);<br>            <span class="hljs-keyword">return</span> strIn.readLine();<br>        }<span class="hljs-keyword">catch</span> (Exception e){<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<br>        }<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="工厂模式小结"><a href="#工厂模式小结" class="headerlink" title="工厂模式小结"></a>工厂模式小结</h3><p>简单工厂模式、工厂方法模式和抽象工厂模式都是创建型设计模式，它们的主要特点如下：</p>
<ul>
<li><strong>简单工厂模式</strong></li>
</ul>
<p>简单工厂模式是一种将对象的创建与使用分离的设计模式，它是一种静态工厂，即工厂类中都是静态方法。简单工厂模式只有一个具体工厂类，并且只能创建一种产品，但是可以通过使用不同的参数创建出不同的具体产品。</p>
<ul>
<li><strong>工厂方法模式</strong></li>
</ul>
<p>工厂方法模式是一种将对象的创建与使用分离的设计模式，基本思想是定义一个工厂接口，然后让具体工厂类实现这个接口，从而实现对产品的创建。工厂方法模式是允许有多个具体工厂类的工厂模式，每个具体工厂只生产一种产品。</p>
<ul>
<li><strong>抽象工厂模式</strong></li>
</ul>
<p>抽象工厂模式是一种能够生产不同产品族的工厂模式，其基本思想是定义一个抽象工厂接口，然后在不同的具体工厂中实现这个接口，从而实现对不同产品族的创建。抽象工厂是允许有多个具体工厂类的工厂模式，每个具体工厂可以生产多种产品。</p>
<p>总的来说，简单工厂模式适用于创建单一产品，工厂方法模式适用于创建多个具体产品，抽象工厂模式适用于创建不同产品族。选择哪个模式要根据具体需求和实现情况来考虑。</p>
<h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><ul>
<li><p>深拷贝和浅拷贝</p>
<ul>
<li>浅拷贝是指将一个对象复制到一个新的对象中，两者的基本数据类型的值相同，但是对于引用类型，两者对应的变量指向的是同一个引用对象，对其中一个的改变会影响另一个。</li>
<li>深拷贝是指将一个对象复制到一个新的对象中，不仅两者的基本数据类型的值相同，而且引用类型的变量也指向了新的引用对象，两者互不干扰。</li>
</ul>
</li>
<li><p>浅拷贝 默认的clone()方法就是浅拷贝</p>
</li>
<li><p>深拷贝</p>
<ul>
<li>方法1 使用clone方法</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//深拷贝 </span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException {<br>        Object deep=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> {<br>            <span class="hljs-comment">//这里完成对基本（数据类型）属性的克隆</span><br>            deep = <span class="hljs-built_in">super</span>.clone();<br>            <span class="hljs-comment">//对引用类型的属性进行单独处理</span><br>            DeepProtoType deepProtoType=(DeepProtoType) deep;<br>            deepProtoType.deepCloneTarget=(DeepCloneableTarget) deepCloneTarget.clone();<br><br>        }<span class="hljs-keyword">catch</span> (CloneNotSupportedException e){<br><br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.clone();<br>    }<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><p>方法2 通过对象序列化实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">deepClone</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//创建到流对象</span><br>        ByteArrayOutputStream bos=<span class="hljs-literal">null</span>;<br>        ObjectOutputStream oos=<span class="hljs-literal">null</span>;<br>        ByteArrayInputStream bis=<span class="hljs-literal">null</span>;<br>        ObjectInputStream ois=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> {<br>            <span class="hljs-comment">//序列化</span><br>            bos=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<br>            oos=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(bos);<br>            oos.writeObject(<span class="hljs-built_in">this</span>);<span class="hljs-comment">//当前对象以对象流方式输出</span><br>            <span class="hljs-comment">//反序列化</span><br>            bis=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(bos.toByteArray());<br>            ois=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(bis);<br>            <span class="hljs-keyword">return</span> (DeepProtoType) ois.readObject();<br>        }<span class="hljs-keyword">catch</span> (Exception e){<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        }<span class="hljs-keyword">finally</span> {<br>            <span class="hljs-keyword">try</span> {<br>                <span class="hljs-keyword">if</span> (bos != <span class="hljs-literal">null</span>) bos.close();<br>                <span class="hljs-keyword">if</span> (oos != <span class="hljs-literal">null</span>) oos.close();<br>                <span class="hljs-keyword">if</span> (bis != <span class="hljs-literal">null</span>) bis.close();<br>                <span class="hljs-keyword">if</span> (ois != <span class="hljs-literal">null</span>) ois.close();<br>            } <span class="hljs-keyword">catch</span> (IOException e) {<br>                e.printStackTrace();<br>            }<br>        }<br>    }<br></code></pre></td></tr></tbody></table></figure>

<p>这段代码是实现了通过对象的深拷贝来复制一个对象，具体实现的过程如下：</p>
<ol>
<li>创建字节流对象: ByteArrayOutputStream bos, 用于存储序列化后的对象数据；ObjectOutputStream oos, 用于将对象序列化后的数据写入到 bos 中。</li>
<li>调用 oos.writeObject(this) 将当前对象实例写入到 bos 中，实现了对象的序列化，并存储在 bos 中。</li>
<li>创建字节输入流对象: ByteArrayInputStream bis, 用于读取反序列化后的数据；ObjectInputStream ois, 用于将序列化后的数据反序列化成对象。</li>
<li>将 bos 中的数据转变成 bis 所需的格式，并读取 bis 中的数据，将其反序列化成 DeepProtoType 对象。</li>
<li>将反序列化后的对象返回。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h3><ul>
<li><p>建造者模式可以让你更容易地构建复杂的对象，而不必关心对象的内部细节。使用该模式可以将对象的创建过程分解成多个步骤，每个步骤负责创建指定的组件或部分。这些部件最终可以组装成一个完整的复杂对象。这样，建造者模式可以使得类的设计更加模块化，易于维护和扩展。例如，您可以使用建造者模式创建汽车对象，可以先创建车轮组件、座椅组件、发动机组件等，然后再将它们组装成一个完整的汽车对象。</p>
</li>
<li><p>建造者模式是一种对象创建型设计模式。它允许您创建具有复杂参数构造函数的对象，同时也可以让您使用步骤来创建该对象的过程。该模式允许您创建不同类型的对象，同时避免需要指定其复杂和多参数构造函数的复杂性。建造者模式将对象的创建过程分解为多个简单的步骤，这些步骤逐个执行以创建最终对象。</p>
</li>
<li><p>建造者模式通常由以下几个组件组成：</p>
<ul>
<li>Director: 指挥者，负责管理建造过程，即创建对象的顺序和方式。这个角色应该知道哪些步骤来执行，以便正确创建一个完整的对象；</li>
<li>Abstract Builder: 建造者接口，定义了将来的具体建造者所应该遵守的约定，以便按照规定的步骤来创建复杂对象；</li>
<li>Concrete Builder: 具体建造者，实现建造者接口中的方法以构建和装配产品，该角色负责实际创建对象的任务；</li>
<li>Product: 产品，由多个部件组成的复杂对象。产品类不需要知道创建它的细节，只需提供所需的方法即可。</li>
</ul>
<p>建造者模式最大的优点在于封装了对象构造过程，让对象的创建和表示分离，并且易于扩展。因此，建造者模式在涉及创建复杂对象的情况下非常有用，例如创建复杂的对象，或者对象包含许多部分或属性。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">House</span> {<br>    <span class="hljs-keyword">private</span> String basic;<br>    <span class="hljs-keyword">private</span> String walls;<br>    <span class="hljs-keyword">private</span> String roofed;<br>}<br><span class="hljs-comment">//抽象的建造者</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HouseBuilder</span> {<br>    <span class="hljs-keyword">protected</span> House house=<span class="hljs-keyword">new</span> <span class="hljs-title class_">House</span>();<br>    <span class="hljs-comment">//将建造的流程写好，抽象方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//建造房子</span><br>    <span class="hljs-keyword">public</span> House <span class="hljs-title function_">buildHouse</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> house;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HighHouseBuilder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HouseBuilder</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给高楼打地基"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给高楼砌墙"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给高楼盖屋顶"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonHouseBuilder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HouseBuilder</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给普通房子打地基"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给普通房子砌墙"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"给普通房子封顶"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HouseDirector</span> {<br>    HouseBuilder houseBuilder=<span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">HouseDirector</span><span class="hljs-params">(HouseBuilder houseBuilder)</span> {<br>        <span class="hljs-built_in">this</span>.houseBuilder = houseBuilder;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHouseBuilder</span><span class="hljs-params">(HouseBuilder houseBuilder)</span> {<br>        <span class="hljs-built_in">this</span>.houseBuilder = houseBuilder;<br>    }<br>    <span class="hljs-comment">//指挥</span><br>    <span class="hljs-comment">//如何处理建造房子的流程，交给指挥者</span><br>    <span class="hljs-keyword">public</span> House <span class="hljs-title function_">constructHouse</span><span class="hljs-params">()</span>{<br>        houseBuilder.buildBasic();<br>        houseBuilder.buildWalls();<br>        houseBuilder.roofed();<br>        <span class="hljs-keyword">return</span> houseBuilder.buildHouse();<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//盖普通房子</span><br>        <span class="hljs-type">CommonHouseBuilder</span> <span class="hljs-variable">commonHouseBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommonHouseBuilder</span>();<br>        <span class="hljs-comment">//准备创建房子的指挥者</span><br>        <span class="hljs-type">HouseDirector</span> <span class="hljs-variable">houseDirector</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HouseDirector</span>(commonHouseBuilder);<br>        <span class="hljs-comment">//完成盖房子</span><br>        <span class="hljs-type">House</span> <span class="hljs-variable">house</span> <span class="hljs-operator">=</span> houseDirector.constructHouse();<br>        System.out.println(<span class="hljs-string">"house = "</span> + house);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230408224019888.png" srcset="/img/loading.gif" lazyload alt="image-20230408224019888"></p>
</li>
</ul>
<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><ul>
<li><p>类适配器</p>
<ul>
<li>类适配器是一种适配器设计模式，它可以将一个类（适配器）的接口转换为另一个类（被适配者）的接口，从而使得客户端可以使用被适配者的接口来访问适配器中的功能。在类适配器中，适配器继承自被适配者类，并实现客户端所期望的接口。</li>
<li>类适配器的优势在于：<ol>
<li>可以通过继承被适配者类来复用被适配者的代码和功能。</li>
<li>客户端可以直接访问被适配者类中的所有方法和属性。</li>
</ol>
</li>
<li>类适配器的缺点在于：<ol>
<li>由于适配器需要继承被适配者类，因此适配器只能适配一个被适配者类，无法适配被适配者类的多个子类。</li>
<li>适配器与被适配者之间是通过继承关系实现的，因此适配器的实现可能受到被适配者类的限制，而无法灵活地实现客户端所期望的接口。</li>
<li>在被适配者类中的方法不能够被客户端重写或覆盖，这可能会导致一些问题。</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Voltage220V</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output220V</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">int</span> src=<span class="hljs-number">220</span>;<br>        System.out.println(<span class="hljs-string">"电压="</span>+src+<span class="hljs-string">"伏"</span>);<br>        <span class="hljs-keyword">return</span> src;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IVoltage5V</span> {<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoltageAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Voltage220V</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IVoltage5V</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span> {<br>        <span class="hljs-comment">//获取到220V电压</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">srcV</span> <span class="hljs-operator">=</span> output220V();<br>        <span class="hljs-comment">//转成5V</span><br>        <span class="hljs-keyword">return</span> srcV/<span class="hljs-number">44</span>;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        System.out.println(<span class="hljs-string">"适配器模式"</span>);<br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>        phone.charging(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VoltageAdapter</span>());<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>


</li>
<li><p>接口适配器</p>
<ul>
<li><p>接口适配器是一种适配器设计模式，它通过在一个适配器中定义一个占位符接口（即接口中的所有方法都没有实现），从而使得客户端只需要实现它所需要的接口方法，而无需实现所有的方法。</p>
</li>
<li><p>接口适配器通常用来解决以下问题：</p>
<ol>
<li>当一个接口中定义了多个方法，但是客户端只需要使用其中的部分方法时，使用接口适配器可以避免客户端实现多余的方法。</li>
<li>当一个接口需要进行修改或扩展时，使用接口适配器可以避免对所有实现该接口类的修改。</li>
</ol>
</li>
<li><p>与其他适配器不同，接口适配器并不需要持有被适配者的实例或者继承被适配者类，而是通过定义一个占位符接口来实现适配器。客户端只需要实现所需要的接口方法即可</p>
</li>
<li><p>接口适配器的优势在于：</p>
<ol>
<li>客户端只需要实现所需要的方法，避免了实现多余的方法，提高了代码的可读性和可维护性。</li>
<li>当一个接口需要修改时，只需要修改占位符接口，而无需修改所有实现该接口的类。</li>
</ol>
</li>
<li><p>接口适配器的缺点在于：</p>
<ol>
<li>占位符接口的定义可能会比较复杂，需要花费更多的时间和精力。</li>
<li>如果一个接口中的方法数量较多，使用接口适配器可能会导致占位符接口中方法数量过多，影响代码的可读性。</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface4</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbsAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface4</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> {<br><br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> {<br><br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> {<br><br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> {<br><br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        AbsAdapter absAdapter= <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbsAdapter</span>() {<br>            <span class="hljs-comment">//只需要去覆盖我们需要使用的接口方法</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> {<br>                System.out.println(<span class="hljs-string">"使用了m1方法"</span>);<br>            }<br>        };<br>        absAdapter.m1();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p>对象适配器</p>
<ul>
<li><p>它使得一个类（适配器）可以将其所持有的另一个类（被适配者）的接口转换为客户端所期望的另一种接口。在对象适配器中，适配器持有被适配者的一个实例，并且将客户端的请求转发给被适配者。</p>
</li>
<li><p>对象适配器的优势在于：</p>
<ol>
<li>可以适配多个被适配者类。</li>
<li>适配器与被适配者之间松耦合，使得适配器可以被更加灵活地重用。</li>
</ol>
</li>
<li><p>对象适配器的缺点在于：</p>
<ol>
<li>客户端只能访问被适配者类中已有的接口，无法访问被适配者类中的其他方法。</li>
<li>由于适配器需要持有被适配者的实例，因此如果被适配者本身是一个大型或重量级对象，可能会导致内存占用过高。</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Voltage220V</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output220V</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">int</span> src=<span class="hljs-number">220</span>;<br>        System.out.println(<span class="hljs-string">"电压="</span>+src+<span class="hljs-string">"伏"</span>);<br>        <span class="hljs-keyword">return</span> src;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IVoltage5V</span> {<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoltageAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IVoltage5V</span> {<br>    <span class="hljs-keyword">private</span> Voltage220V voltage220V;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">VoltageAdapter</span><span class="hljs-params">(Voltage220V voltage220V)</span> {<br>        <span class="hljs-built_in">this</span>.voltage220V = voltage220V;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span> {<br>        <span class="hljs-type">int</span> dst=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span>(voltage220V!=<span class="hljs-literal">null</span>){<br>            System.out.println(<span class="hljs-string">"使用对象适配器进行转换"</span>);<br>            <span class="hljs-comment">//获取到220V电压</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">srcV</span> <span class="hljs-operator">=</span>voltage220V.output220V();<br>            <span class="hljs-comment">//转成5V</span><br>            dst=srcV/<span class="hljs-number">44</span>;<br>        }<br>        <span class="hljs-keyword">return</span> dst;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        System.out.println(<span class="hljs-string">"适配器模式"</span>);<br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>        <span class="hljs-comment">//传入被适配器</span><br>        phone.charging(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VoltageAdapter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Voltage220V</span>()));<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
</ul>
<h3 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h3><ul>
<li><p>桥接模式通过将抽象部分和实现部分分离，使得它们可以独立地变化。在桥接模式中，我们使用一个桥接类来连接抽象部分和实现部分，这个桥接类包含了抽象类的引用，以及一个实现类的引用。这样，我们就可以动态地改变抽象部分和实现部分之间的关系。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Brand</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> {<br>    <span class="hljs-keyword">private</span> Brand brand;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Phone</span><span class="hljs-params">(Brand brand)</span> {<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.brand = brand;<br>    }<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.brand.open();<br>    }<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.brand.close();<br>    }<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.brand.call();<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoldPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">FoldPhone</span><span class="hljs-params">(Brand brand)</span> {<br>        <span class="hljs-built_in">super</span>(brand);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.open();<br>        System.out.println(<span class="hljs-string">"折叠手机"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.close();<br>        System.out.println(<span class="hljs-string">"折叠手机"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.call();<br>        System.out.println(<span class="hljs-string">"折叠手机"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpRightPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UpRightPhone</span><span class="hljs-params">(Brand brand)</span> {<br>        <span class="hljs-built_in">super</span>(brand);<br>    }<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.open();<br>        System.out.println(<span class="hljs-string">"直立手机"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.close();<br>        System.out.println(<span class="hljs-string">"直立手机"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">super</span>.call();<br>        System.out.println(<span class="hljs-string">"直立手机"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vivo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"vivo手机开机"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"vivo手机关机"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"vivo手机打电话"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XIaoMI</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"小米手机开机"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"小米手机关机"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"小米手机打电话"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//获取折叠手机</span><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">foldPhone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XIaoMI</span>());<br>        foldPhone.open();<br>        foldPhone.close();<br>        foldPhone.close();<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">foldPhone1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vivo</span>());<br>        foldPhone1.open();<br>        foldPhone1.call();<br>        foldPhone1.close();<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230410100333803.png" srcset="/img/loading.gif" lazyload alt="image-20230410100333803"></p>
</li>
</ul>
<h3 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h3><ul>
<li><p>装饰器模式是一种结构型设计模式，它允许在运行时动态地新增一些行为到一个对象中，而不需要修改它的源代码。这种设计模式通过将对象封装在装饰器类中，以增加对象的功能和特性，而不需要创建一个新的子类。</p>
</li>
<li><p>这种模式适用于：</p>
<ul>
<li><p>需要在不修改原始对象源代码的情况下增加对象功能的场景；</p>
</li>
<li><p>需要在运行时为一个对象增加多个行为的场景；</p>
</li>
<li><p>在继承关系中，父类结构固定，但是需要新增一些功能的场景。</p>
</li>
</ul>
</li>
<li><p>装饰器模式的实现可以基于类或者基于函数。在基于类实现中，装饰器类通常继承自原始对象的类，然后通过组合方式在运行时为原始对象增加新的职责。在基于函数实现中，装饰器函数接收一个函数作为参数，然后返回一个新的函数，在这个新的函数中增加了新的行为。</p>
<p>抽象类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Drink</span> {<br>    <span class="hljs-keyword">public</span> String des;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> price=<span class="hljs-number">0.0f</span>;<br>    <span class="hljs-comment">//计算费用的抽象方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span>  <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> des;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDes</span><span class="hljs-params">(String des)</span> {<br>        <span class="hljs-built_in">this</span>.des = des;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> price;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">float</span> price)</span> {<br>        <span class="hljs-built_in">this</span>.price = price;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Drink{"</span> +<br>                <span class="hljs-string">"描述='"</span> + des + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">", 价格="</span> + price +<br>                <span class="hljs-string">'}'</span>;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure>

<p>装饰类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span>{<br>    <span class="hljs-keyword">private</span> Drink obj;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Decorator</span><span class="hljs-params">(Drink obj)</span> {<br>        <span class="hljs-built_in">this</span>.obj = obj;<br>    }<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getPrice()+ obj.cost();<br>    }<br><br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.des<br>                +<span class="hljs-string">" "</span>+<span class="hljs-built_in">super</span>.getPrice()<br>                +<span class="hljs-string">"&amp;&amp;"</span>+obj.getDes();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>品类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getPrice();<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure>

<p>单品类</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javav">public class ShortBlack extends Coffee{<br>    public ShortBlack() {<br>        this.setDes("ShortBlack");<br>        this.setPrice(4.0f);<br>    }<br>}<br>public class LongBlack extends Coffee {<br>    public LongBlack() {<br>        this.setDes("美式咖啡");<br>        this.setPrice(5.0f);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>装饰类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Soy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Decorator</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Soy</span><span class="hljs-params">(Drink obj)</span> {<br>        <span class="hljs-built_in">super</span>(obj);<br>        setDes(<span class="hljs-string">"豆浆"</span>);<br>        setPrice(<span class="hljs-number">1.5f</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Milk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Decorator</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Milk</span><span class="hljs-params">(Drink obj)</span> {<br>        <span class="hljs-built_in">super</span>(obj);<br>        setDes(<span class="hljs-string">"牛奶"</span>);<br>        setPrice(<span class="hljs-number">2.0f</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Espresso</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Coffee</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Espresso</span><span class="hljs-params">()</span>{<br>        <span class="hljs-built_in">this</span>.setDes(<span class="hljs-string">"意大利咖啡"</span>);<br>        <span class="hljs-built_in">this</span>.setPrice(<span class="hljs-number">6.0f</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CoffeeBar {<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) {<br>        //<span class="hljs-number">1.</span>点一份longBlack<br>        Drink <span class="hljs-keyword">order</span> = <span class="hljs-built_in">new</span> LongBlack();<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println("order = " +<span class="hljs-keyword">order</span>.getDes()+ <span class="hljs-keyword">order</span>.<span class="hljs-keyword">cost</span>());<br>        //<span class="hljs-number">2.</span>加入一份牛奶<br>        <span class="hljs-keyword">order</span>=<span class="hljs-built_in">new</span> Milk(<span class="hljs-keyword">order</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println("order = "+<span class="hljs-keyword">order</span>.getDes() + <span class="hljs-keyword">order</span>.<span class="hljs-keyword">cost</span>());<br>        //<span class="hljs-number">3.</span>加入一份巧克力<br>        <span class="hljs-keyword">order</span>=<span class="hljs-built_in">new</span> Chocolate(<span class="hljs-keyword">order</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println("order = " +<span class="hljs-keyword">order</span>.getDes()+ <span class="hljs-keyword">order</span>.<span class="hljs-keyword">cost</span>());<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<p>​		<img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230410120740431.png" srcset="/img/loading.gif" lazyload alt="image-20230410120740431"></p>
<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><ul>
<li><p>组合模式是一种常用的结构型设计模式，它通过将对象组合成树状结构，可以让客户端以统一的方式处理单个对象和组合对象。这种模式可以让我们更加灵活地构建层级结构，以及处理层级结构中的对象，让结构更清晰，代码更易于理解。</p>
</li>
<li><p>组合模式适用于以下情况：</p>
<ul>
<li><p>需要构建层级结构的场景，如文件系统、组织架构等；</p>
</li>
<li><p>希望客户端能够以一种统一的方式处理单个对象和组合对象的场景；</p>
</li>
<li><p>希望在层级结构中增加或者删除某个对象时，对其他对象没有影响。</p>
</li>
</ul>
</li>
<li><p>在组合模式中，有两种对象类型：组合对象和叶子对象。组合对象包含其他组合对象或者叶子对象，叶子对象没有子对象，可以被当做基本对象来处理。组合对象和叶子对象都实现了相同的接口，可以在客户端以一种统一的方式来使用。</p>
</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//接口类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrganizationComponent</span> {<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String des;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span>{<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();<br>    }<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span>{<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();<br>    }<br>    <span class="hljs-comment">//方法print</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrganizationComponent</span><span class="hljs-params">(String name, String des)</span> {<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.des = des;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> name;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">this</span>.name = name;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> des;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDes</span><span class="hljs-params">(String des)</span> {<br>        <span class="hljs-built_in">this</span>.des = des;<br>    }<br>}<br><span class="hljs-comment">//组合对象</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">University</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span>{<br><br>    List&lt;OrganizationComponent&gt; organizationComponents=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">University</span><span class="hljs-params">(String name, String des)</span> {<br>        <span class="hljs-built_in">super</span>(name, des);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> {<br>        organizationComponents.add(organizationComponent);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> {<br>        organizationComponents.remove(organizationComponent);<br>    }<br>    <span class="hljs-comment">//print()方法就是输出University包含的学院</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"=========="</span>+<span class="hljs-built_in">this</span>.getName()+<span class="hljs-string">"=========="</span>);<br>        <span class="hljs-comment">//打印出</span><br>        <span class="hljs-keyword">for</span> (OrganizationComponent organizationComponent : organizationComponents) {<br>            organizationComponent.print();<br>        }<br>    }<br><br>}<br><span class="hljs-comment">//组合对象</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Collage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span>{<br>    <span class="hljs-comment">//这个list中存放的是Department</span><br>    List&lt;OrganizationComponent&gt; organizationComponents=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Collage</span><span class="hljs-params">(String name, String des)</span> {<br>        <span class="hljs-built_in">super</span>(name, des);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> {<br>        organizationComponents.add(organizationComponent);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> {<br>        organizationComponents.remove(organizationComponent);<br>    }<br>    <span class="hljs-comment">//print()方法就是输出University包含的学院</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"=========="</span>+<span class="hljs-built_in">this</span>.getName()+<span class="hljs-string">"=========="</span>);<br>        <span class="hljs-comment">//打印出</span><br>        <span class="hljs-keyword">for</span> (OrganizationComponent organizationComponent : organizationComponents) {<br>            organizationComponent.print();<br>        }<br>    }<br>}<br><span class="hljs-comment">//叶子节点</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Department</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span>{<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Department</span><span class="hljs-params">(String name, String des)</span> {<br>        <span class="hljs-built_in">super</span>(name, des);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDes();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-built_in">this</span>.getName());<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>运行程序</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//从大到小创建对象</span><br>        <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">university</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">University</span>(<span class="hljs-string">"湖南工厂学院"</span>, <span class="hljs-string">"学校"</span>);<br>        <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">collage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Collage</span>(<span class="hljs-string">"计算机学院"</span>, <span class="hljs-string">"计算机"</span>);<br>        <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">collage1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Collage</span>(<span class="hljs-string">"化学学院"</span>, <span class="hljs-string">"化学"</span>);<br>        <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">collage2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Collage</span>(<span class="hljs-string">"数学学院"</span>, <span class="hljs-string">"数学"</span>);<br>        collage.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">"软件工程"</span>, <span class="hljs-string">"软工"</span>));<br>        collage.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">"计算机科学与技术"</span>, <span class="hljs-string">"码农"</span>));<br>        collage.add( <span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">"计算机网络"</span>, <span class="hljs-string">"网工"</span>));<br>        university.add(collage);<br>        university.add(collage1);<br>        university.add(collage2);<br>        university.print();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">==========湖南工厂学院==========<br>==========计算机学院==========<br>软件工程<br>计算机科学与技术<br>计算机网络<br>==========化学学院==========<br>==========数学学院==========<br></code></pre></td></tr></tbody></table></figure>

<h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h3><ul>
<li><p>外观模式对外屏蔽了子系统的细节，因此外观模式降低了客户端对子系统的使用的复杂性</p>
</li>
<li><p>外观模式对客户端与子系统之间的耦合关系，让子系统内部更易维护和扩展</p>
</li>
<li><p>通过合理的使用外观模式，可以帮我们更好的划分访问的层次</p>
</li>
<li><p>当系统需要分层设计时，可以考虑使用外观模式</p>
</li>
<li><p>在维护一个遗留的大系统时，可能这个系统已经变得非常难以维护和扩展，此时可以考虑为新系统开发一个外观类，来提供遗留系统的比较清晰简单的接口，让新系统与外观类交互，提高复用性</p>
</li>
<li><p>不能过多的或者不合理的使用外观模式，使用外观模式好，还是直接调用模块好，要以让系统更加有层次，有利于维护为目的</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 子系统A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemA</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationA</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"SystemA operation"</span>);<br>    }<br>}<br><br><span class="hljs-comment">// 子系统B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemB</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationB</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"SystemB operation"</span>);<br>    }<br>}<br><br><span class="hljs-comment">// 外观类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Facade</span> {<br>    <span class="hljs-keyword">private</span> SystemA systemA;<br>    <span class="hljs-keyword">private</span> SystemB systemB;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Facade</span><span class="hljs-params">()</span> {<br>        systemA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemA</span>();<br>        systemB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemB</span>();<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operate</span><span class="hljs-params">()</span> {<br>        systemA.operationA();<br>        systemB.operationB();<br>    }<br>}<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-type">Facade</span> <span class="hljs-variable">facade</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Facade</span>();<br>        facade.operate();<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure>

<p>在上述示例中，<code>SystemA</code> 和 <code>SystemB</code> 是两个复杂的子系统，客户端需要了解内部实现才能操作。而 <code>Facade</code> 类则是一个外观，封装了 <code>SystemA</code> 和 <code>SystemB</code> 的操作，在客户端调用时只需要操作 <code>Facade</code> 类，无需关心内部细节。这种设计能够提高代码的灵活性和可维护性，同时也能提高客户端的操作便捷性</p>
</li>
</ul>
<h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><ul>
<li><p>享表示共享，元表示对象</p>
</li>
<li><p>系统中有大量对象，这些对象消耗大量内存，并且对象的状态大部分可以外部化时，我们就可以考虑选用享元模式</p>
</li>
<li><p>用唯一标识码判断，如果在内存中有，则返回这个唯一的标识码标识的对象，用HashMap存储</p>
</li>
<li><p>享元模式提高了系统的复杂度，需要分离出内部状态和外部状态而外部状态具有固化特性，不应该随着内部状态的改变而改变，这是我们使用享元模式需要注意的地方</p>
</li>
<li><p>使用享元模式时，注意划分内部状态和外部状态，并且需要有一个工厂内加以控制</p>
</li>
<li><p>享元模式经典的应用场景是需要使用到缓冲池的场景，比如String常量池，数据库连接池。</p>
</li>
<li><p>享元模式是一种结构型设计模式，它的主要目的是通过分享对象来尽量减少内存使用量。享元模式将一个对象分成两个部分：内部状态（Intrinsic State）和外部状态（Extrinsic State）。</p>
<p>内部状态指的是对象的一些固有属性，这些属性可以在对象被创建时进行初始化，一旦初始化后就不会发生改变。因此，所有实例间内部状态相同的对象可以共享同一个存储位置，而不需要每个对象都创建一个存储位置。</p>
<p>外部状态指的是对象的一些变化属性，这些属性可能在对象创建后会发生改变。因此，不同实例之间的外部状态是不同的，不能共享同一个存储位置。在使用享元模式时，需要将这些外部状态从对象中拆分出来，并作为参数传递给对象的操作方法。</p>
<p>以围棋游戏为例，棋子的内部状态是其颜色（黑色或白色），而外部状态指的是其位置。在使用享元模式时，可以将所有颜色相同的棋子共享同一个对象，因为它们的内部状态相同，而将不同位置的棋子作为外部状态传递给棋子的操作方法。这样可以大大减少内存使用量。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSite</span> {<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">(User user)</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteWebSite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebSite</span>{<br>    <span class="hljs-comment">//共享的部分，内部状态</span><br>    <span class="hljs-keyword">private</span> String type=<span class="hljs-string">""</span>;<span class="hljs-comment">//网站发布的类型</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">(User user)</span> {<br>        System.out.println(<span class="hljs-string">"网站的发布形式为"</span>+type);<br>        System.out.println(<span class="hljs-string">"使用者"</span>+user.getUsername());<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteWebSite</span><span class="hljs-params">(String type)</span> {<br>        <span class="hljs-built_in">this</span>.type = type;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSiteFactory</span> {<br>    <span class="hljs-comment">//集合，充当池的作用</span><br>    <span class="hljs-keyword">private</span> HashMap&lt;String,ConcreteWebSite&gt; pool=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>    <span class="hljs-comment">//根据网站的类型返回一个网站，如果没有就创建就创建一个网站并放入到池中，并返回</span><br>    <span class="hljs-keyword">public</span> WebSite <span class="hljs-title function_">getWebSiteCategory</span><span class="hljs-params">(String type)</span>{<br>        <span class="hljs-keyword">if</span> (!pool.containsKey(type)){<br>            <span class="hljs-comment">//创建一个</span><br>            pool.put(type,<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteWebSite</span>(type));<br>        }<br>        <span class="hljs-keyword">return</span> (WebSite) pool.get(type);<br>    }<br>    <span class="hljs-comment">//获取网站分类总数</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getWebSiteCount</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> pool.size();<br>    }<br>}<br><span class="hljs-comment">//享元模式的外部状态</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-keyword">private</span> String username;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> username;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> {<br>        <span class="hljs-built_in">this</span>.username = username;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String username)</span> {<br>        <span class="hljs-built_in">this</span>.username = username;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建一个工厂类</span><br>        <span class="hljs-type">WebSiteFactory</span> <span class="hljs-variable">webSiteFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSiteFactory</span>();<br>        <span class="hljs-comment">//客户要一个以新闻形式发布的网站</span><br>        <span class="hljs-type">WebSite</span> <span class="hljs-variable">web1</span> <span class="hljs-operator">=</span> webSiteFactory.getWebSiteCategory(<span class="hljs-string">"news"</span>);<br>        web1.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"cxk"</span>));<br>        WebSite web2= webSiteFactory.getWebSiteCategory(<span class="hljs-string">"news"</span>);<br>        web1.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"cxk2"</span>));<br>        <span class="hljs-type">WebSite</span> <span class="hljs-variable">web3</span> <span class="hljs-operator">=</span> webSiteFactory.getWebSiteCategory(<span class="hljs-string">"news"</span>);<br>        web1.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"cxk3"</span>));<br>        <span class="hljs-type">WebSite</span> <span class="hljs-variable">web4</span> <span class="hljs-operator">=</span> webSiteFactory.getWebSiteCategory(<span class="hljs-string">"news"</span>);<br>        web1.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"cxk4"</span>));<br>        <span class="hljs-comment">//获取webSite大小</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">webSiteCount</span> <span class="hljs-operator">=</span> webSiteFactory.getWebSiteCount();<br>        System.out.println(<span class="hljs-string">"webSiteCount = "</span> + webSiteCount);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs \">网站的发布形式为news<br>使用者cxk<br>网站的发布形式为news<br>使用者cxk2<br>网站的发布形式为news<br>使用者cxk3<br>网站的发布形式为news<br>使用者cxk4<br>webSiteCount = 1<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><h4 id="静态代理模式"><a href="#静态代理模式" class="headerlink" title="静态代理模式"></a>静态代理模式</h4><ul>
<li><p>静态代理是指定义一个代理类去代理一个真实类，使得调用者在使用时无需知道真实类的存在，代理类会在调用真实类方法前后加上一些额外的逻辑处理。</p>
</li>
<li><p>静态代理需要针对每个被代理类单独写一个代理类，即使代理逻辑相同，每次都需要重复写代理类，不利于维护和扩展。</p>
</li>
<li><p>例如，假设有一个接口 IUserService，定义了一个方法 saveUser，真实类 UserServiceImpl 实现了该接口，我们可以定义一个代理类 UserServiceProxy 去代理 UserServiceImpl，并在代理类中加上一些额外的逻辑，如记录日志、检验参数等，代码如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUserService</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name, String pwd)</span>;<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name, String pwd)</span> {<br>        <span class="hljs-comment">// 真正的业务逻辑</span><br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span>{<br>    <span class="hljs-keyword">private</span> IUserService userService;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserServiceProxy</span><span class="hljs-params">(IUserService userService)</span>{<br>        <span class="hljs-built_in">this</span>.userService = userService;<br>    }<br> <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name, String pwd)</span> {<br>        System.out.println(<span class="hljs-string">"保存用户前检验参数..."</span>);<br>        userService.saveUser(name, pwd);<br>        System.out.println(<span class="hljs-string">"保存用户后记录日志..."</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>使用时，我们先创建真实类 UserServiceImpl 的实例，再创建代理类 UserServiceProxy 的实例，将真实类实例传入代理类构造方法中，最后调用代理类的 saveUser 方法，代码如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">IUserService</span> <span class="hljs-variable">userServiceImpl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br><span class="hljs-type">IUserService</span> <span class="hljs-variable">userServiceProxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceProxy</span>(userServiceImpl);<br>userServiceProxy.saveUser(<span class="hljs-string">"Tom"</span>, <span class="hljs-string">"123456"</span>);<br><br></code></pre></td></tr></tbody></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">保存用户前检验参数...<br>保存用户...<br>保存用户后记录日志...<br></code></pre></td></tr></tbody></table></figure>

<p>可以看到，调用代理类的 saveUser 方法时，代理类会在调用真实类方法前后加上一些额外的逻辑处理，达到了代理的目的。</p>
</li>
</ul>
<h4 id="JDK动态代理"><a href="#JDK动态代理" class="headerlink" title="JDK动态代理"></a>JDK动态代理</h4><ul>
<li><p>相比较于静态代理需要手动编写代理类，JDK动态代理可以在运行时动态生成代理类，不需要手写代理类。JDK动态代理需要有一个接口来声明代理类，所以只能代理有接口的真实类，不能代理没有接口的类。</p>
</li>
<li><p>JDK动态代理的核心类是 java.lang.reflect.Proxy，它提供了一个静态工厂方法 newProxyInstance，用来创建代理类对象。newProxyInstance 方法需要传入三个参数，分别为：类加载器、代理类需要实现的接口数组、指定的 InvocationHandler 对象。</p>
</li>
<li><p>InvocationHandler 接口中只有一个方法 invoke，该方法会在代理类调用任意方法时被回调，我们可以在该方法中对真实类方法的调用进行拦截和增强处理。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITeacherDao</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ITeacherDao</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"老师正在授课中......"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> {<br>    <span class="hljs-comment">//维护一个目标对象，Object</span><br>    <span class="hljs-keyword">private</span> Object target;<br>    <span class="hljs-comment">//通过构造器传入目标对象，初始化</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object target)</span> {<br>        <span class="hljs-built_in">this</span>.target = target;<br>    }<br>    <span class="hljs-comment">//给目标对象生成一个代理对象</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * public static Object newProxyInstance(ClassLoader loader,</span><br><span class="hljs-comment">         *                 Class&lt;?&gt;[] interfaces,</span><br><span class="hljs-comment">         *                 InvocationHandler h)</span><br><span class="hljs-comment">         * 1 ClassLoader loader:指当前目标对象使用的类加载器，获取加载器的方法固定</span><br><span class="hljs-comment">         * 2 Class&lt;&gt;() interface:目标对象实现的接口，使用泛型方法确认实现</span><br><span class="hljs-comment">         * 3 InvocationHandler h:事件处理器，执行目标方法时，会触发事情处理器方法</span><br><span class="hljs-comment">         * 会把当前执行的目标对象方法作为一个参数传入</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(),<br>                target.getClass().getInterfaces(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {<br>                        System.out.println(<span class="hljs-string">"==&gt;JDK代理&lt;=="</span>);<br>                        <span class="hljs-comment">//反射调用目标对象的方法</span><br>                        <span class="hljs-keyword">return</span> method.invoke(target, args);<br>                    }<br>                });<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建目标对象</span><br>        <span class="hljs-type">ITeacherDao</span> <span class="hljs-variable">teacherDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>        <span class="hljs-comment">//给目标对象创建代理对象</span><br>        <span class="hljs-type">ProxyFactory</span> <span class="hljs-variable">proxyFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(teacherDao);<br>        <span class="hljs-type">ITeacherDao</span> <span class="hljs-variable">proxyInstance</span> <span class="hljs-operator">=</span> (ITeacherDao)proxyFactory.getProxyInstance();<br>        proxyInstance.teach();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>输出结果</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">==&gt;JDK代理&lt;==<br>老师正在授课中......<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h4 id="Cglib动态代理"><a href="#Cglib动态代理" class="headerlink" title="Cglib动态代理"></a>Cglib动态代理</h4><p>​	优点</p>
<ul>
<li>相对于 JDK 动态代理，它可以代理没有实现接口的类。</li>
<li>生成的代理类是目标对象的子类，因此可以重写目标对象的方法，实现代理逻辑。</li>
<li>CGLIB 库性能比 JDK 动态代理高，因为它使用字节码生成技术直接对目标对象进行操作，而不是通过反射调用目标方法。</li>
</ul>
<p>​    缺点</p>
<ul>
<li><p>由于 CGLIB 是直接操作字节码生成代理类，因此可能会有一些类加载方面的问题。</p>
</li>
<li><p>由于它是生成子类来实现代理，因此如果目标类被final关键字修饰，CGLIB就无法对其进行代理，会导致代理失败的情况。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"Cglib代理，不需要实现接口"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MethodInterceptor</span>{<br>    <span class="hljs-comment">//维护一个目标对象</span><br>    <span class="hljs-keyword">private</span> Object target;<br>    <span class="hljs-comment">//传入一个被代理的对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object target)</span> {<br>        <span class="hljs-built_in">this</span>.target = target;<br>    }<br>    <span class="hljs-comment">//返回一个代理对象，目标对象的代理对象</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//创建一个工具类</span><br>        <span class="hljs-type">Enhancer</span> <span class="hljs-variable">enhancer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Enhancer</span>();<br>        <span class="hljs-comment">//设置父类</span><br>        enhancer.setSuperclass(target.getClass());<br>        <span class="hljs-comment">//设置回调函数</span><br>        enhancer.setCallback(<span class="hljs-built_in">this</span>);<br>        <span class="hljs-comment">//创建子类对象，即代理对象</span><br>        <span class="hljs-keyword">return</span> enhancer.create();<br>    }<br>    <span class="hljs-comment">// intercept()会调用目标对象的方法</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Object o, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="hljs-keyword">throws</span> Throwable {<br>        System.out.println(<span class="hljs-string">"Cglib代理模式开始"</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">invoke</span> <span class="hljs-operator">=</span> method.invoke(target, args);<br>        System.out.println(<span class="hljs-string">"Cglib代理提交"</span>);<br>        <span class="hljs-keyword">return</span> invoke;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建目标对象</span><br>        <span class="hljs-type">TeacherDao</span> <span class="hljs-variable">teacherDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>        <span class="hljs-comment">//获取代理对象，将目标对象传递给代理对象</span><br>        <span class="hljs-type">ProxyFactory</span> <span class="hljs-variable">proxyFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(teacherDao);<br>        <span class="hljs-type">TeacherDao</span> <span class="hljs-variable">proxyInstance</span> <span class="hljs-operator">=</span> (TeacherDao)proxyFactory.getProxyInstance();<br>        <span class="hljs-comment">//执行代理对象的方法，触发intercept()方法从而实现对目标对象的调用</span><br>        proxyInstance.teach();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h3><ul>
<li><p>模板方法模式是一种设计模式，可以让程序员通过定义一些基本算法的步骤，来约束程序员在这些步骤上完成操作。这种模式既不会改变已有的算法步骤，也不会另外编写新的算法，只要在基本算法的步骤上进行扩展就可以了。常常用于处理需要按照一定步骤进行处理的问题。</p>
</li>
<li><p>模板方法模式包含以下角色：</p>
<ul>
<li>抽象模板（Abstract Template）类： 定义了模板方法和一些抽象方法，这些抽象方法由子类来实现。</li>
<li>具体模板（Concrete Template）类： 实现了抽象模板类中定义的抽象方法，完成模板方法中的各个步骤。</li>
<li>客户端（Client）类： 调用模板方法来完成具体的业务逻辑。</li>
</ul>
</li>
<li><p>模板方法模式优点：</p>
<ol>
<li>算法骨架是固定的，易于控制和管理；</li>
<li>扩展性好，具体的实现可以在子类中定义；</li>
<li>符合开闭原则，代码在使用过程中可以扩展，但不需要修改。</li>
</ol>
</li>
<li><p>模板方法模式缺点：</p>
<ol>
<li>模板方法中定义的步骤是固定的，不够灵活。</li>
<li>如果具体实现类过多，会导致子类数量过于庞大，导致系统复杂度的提高。</li>
</ol>
<p>抽象模板</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SoyaMilk</span> {<br>    <span class="hljs-comment">//模板方法，make 模板方法可以做成final，不让子类去覆盖</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span>{<br>        select();<br>        addCondiment();<br>        soak();<br>        beat();<br>    }<br>    <span class="hljs-comment">//选材料</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">select</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"1选好材料--新鲜黄豆"</span>);<br>    }<br>    <span class="hljs-comment">//添加不同的配料，抽象方法</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiment</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//浸泡</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">soak</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"3黄豆和材料开始浸泡"</span>);<br>    }<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">beat</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"4黄豆和配料放入豆浆机"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>具体模板</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedBeanSoyamilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiment</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"加入上好的红豆"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PeanutSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiment</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"加入上好的花生"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//制作红豆豆浆</span><br>        <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">redBeanSoyamilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedBeanSoyamilk</span>();<br>        redBeanSoyamilk.make();<br>        System.out.println(<span class="hljs-string">"====="</span>);<br>        <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">peanutSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PeanutSoyaMilk</span>();<br>        peanutSoyaMilk.make();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
</li>
<li><p>也可以引入钩子函数，它默认不做任何事情，子类可以视情况要不要覆盖</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SoyaMilk</span> {<br>    <span class="hljs-comment">//模板方法，make 模板方法可以做成final，不让子类去覆盖</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span>{<br>        select();<br>        <span class="hljs-keyword">if</span>(customWant()){<br>            addCondiment();<br>        }<br>        soak();<br>        beat();<br>    }<br>    <span class="hljs-comment">//选材料</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">select</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"1选好材料--新鲜黄豆"</span>);<br>    }<br>    <span class="hljs-comment">//添加不同的配料，抽象方法</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiment</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//浸泡</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">soak</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"3黄豆和材料开始浸泡"</span>);<br>    }<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">beat</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"4黄豆和配料放入豆浆机"</span>);<br>    }<br>    <span class="hljs-comment">//钩子方法，决定是否需要添加配料</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">customWant</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PureSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span>{<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiment</span><span class="hljs-params">()</span> {<br>        <span class="hljs-comment">//空实现</span><br>    }<br>    <span class="hljs-comment">//不需要配料 实现钩子方法</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">customWant</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><ul>
<li><p>命令模式是一种行为型设计模式，它将一个请求封装为一个对象，使得请求的发送者和接收者分别独立，且可随时增加新的请求。该模式分为四个角色：抽象命令、具体命令、调用者和接收者。抽象命令类定义了一个抽象的接口，具体命令类实现了抽象命令，并封装了一个或多个接收者，调用者负责调用具体命令来执行请求。</p>
</li>
<li><p>命令模式优点：</p>
<ol>
<li>解耦请求的发送者和接收者，降低了耦合度；</li>
<li>可以轻松添加新的命令，符合开闭原则；</li>
<li>可以将命令排队，实现请求的批处理、撤销和重做等操作。</li>
</ol>
</li>
<li><p>命令模式缺点：</p>
<ol>
<li>每个具体命令类都需要定义一个接收者，导致类的数量增加；</li>
<li>命令的执行时间和执行顺序不易控制。</li>
</ol>
</li>
<li><p>应用场景：</p>
<ol>
<li>系统需要将请求调用者和请求接收者解耦，使得调用者和接收者不直接交互；</li>
<li>系统需要支持命令的撤销(Undo)和恢复(Redo)操作；</li>
<li>系统需要支持命令的排队、记录日志、多次执行等功能。</li>
</ol>
</li>
<li><p>例如，电灯遥控器使用了命令模式。用户按下遥控器上的按钮时，遥控器会发送一个对应的命令到电灯控制器，控制器会将命令封装为一个对象，并将其送到电灯上执行。这样，在每个命令对象中，封装了具体的操作和接受者对象，从而实现了请求发送者和接收者之间的解耦。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//创建命令接口</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Command</span> {<br>    <span class="hljs-comment">//执行操作</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//撤销操作</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOffCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> {<br>    <span class="hljs-comment">//聚合 LightReceiver</span><br>    LightReceiver light;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LightOffCommand</span><span class="hljs-params">(LightReceiver light)</span> {<br>        <span class="hljs-built_in">this</span>.light = light;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {<br>        <span class="hljs-comment">//调用接收者方法</span><br>        light.off();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> {<br>        light.on();<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOnCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span>{<br>    <span class="hljs-comment">//聚合 LightReceiver</span><br>    LightReceiver light;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LightOnCommand</span><span class="hljs-params">(LightReceiver light)</span> {<br>        <span class="hljs-built_in">this</span>.light = light;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {<br>        <span class="hljs-comment">//调用接收者方法</span><br>        light.on();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> {<br>        light.off();<br>    }<br>}<br><span class="hljs-comment">//空执行 用于初始化每个按钮，当调用空命令时，对象什么都不做，</span><br><span class="hljs-comment">// 这也是一种设计模式，可以省掉对空的判断</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {<br><br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> {<br><br>    }<br>}<br><span class="hljs-comment">//命令执行对象（接收者）</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightReceiver</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"电灯打开了"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"电灯关闭了"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteController</span> {<br>    <span class="hljs-comment">//开按钮的命令数组</span><br>    Command[] onCommands;<br>    <span class="hljs-comment">//关按钮的命令数组</span><br>    Command[] offCommands;<br>    <span class="hljs-comment">//执行撤销的命令</span><br>    Command undoCommand;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RemoteController</span><span class="hljs-params">()</span> {<br>        onCommands=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>[<span class="hljs-number">5</span>];<br>        offCommands=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>[<span class="hljs-number">5</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<br>            <span class="hljs-comment">//使用空命令进行初始化</span><br>            onCommands[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoCommand</span>();<br>            offCommands[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoCommand</span>();<br>        }<br>    }<br>    <span class="hljs-comment">//给我们的按钮设置需要的命令</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCommands</span><span class="hljs-params">(<span class="hljs-type">int</span> no,Command onCommand,Command offCommand)</span>{<br>        onCommands[no]=onCommand;<br>        offCommands[no]=offCommand;<br>    }<br>    <span class="hljs-comment">//按下开的按钮</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onButtonWasPushed</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span>{<br>        <span class="hljs-comment">//找到你按开的按钮，调用对应方法</span><br>        onCommands[no].execute();<br>        <span class="hljs-comment">//记录本次操作，用于撤销</span><br>        undoCommand=onCommands[no];<br>    }<br>    <span class="hljs-comment">//按下关的按钮</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offButtonWasPushed</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span>{<br>        <span class="hljs-comment">//找到你按开的按钮，调用对应方法</span><br>        offCommands[no].execute();<br>        <span class="hljs-comment">//记录本次操作，用于撤销</span><br>        undoCommand=offCommands[no];<br>    }<br>    <span class="hljs-comment">//按下撤销的按钮</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undoButtonWasPushed</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span>{<br>      undoCommand.undo();<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//使用命令设计模式，完成通过遥控器对电灯的操作</span><br>        <span class="hljs-comment">//创建电灯的对象（接收者）</span><br>        <span class="hljs-type">LightReceiver</span> <span class="hljs-variable">lightReceiver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightReceiver</span>();<br>        <span class="hljs-comment">//创建电灯相关的开关命令</span><br>        <span class="hljs-type">LightOnCommand</span> <span class="hljs-variable">lightOnCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOnCommand</span>(lightReceiver);<br>        <span class="hljs-type">LightOffCommand</span> <span class="hljs-variable">lightOffCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOffCommand</span>(lightReceiver);<br>        <span class="hljs-comment">//需要一个遥控器</span><br>        <span class="hljs-type">RemoteController</span> <span class="hljs-variable">remoteController</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RemoteController</span>();<br>        <span class="hljs-comment">//给遥控器设置相关命令，比如no=0是电灯的开和关操作</span><br>        remoteController.setCommands(<span class="hljs-number">0</span>,lightOnCommand,lightOffCommand);<br>        <span class="hljs-comment">//按下开灯</span><br>        remoteController.onButtonWasPushed(<span class="hljs-number">0</span>);<br>        <span class="hljs-comment">//按下关灯</span><br>        remoteController.offButtonWasPushed(<span class="hljs-number">0</span>);<br>        <span class="hljs-comment">//按下撤销</span><br>        remoteController.undoButtonWasPushed(<span class="hljs-number">0</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h3><ul>
<li>访问者模式是在一个程序中对于某个特定的数据结构中的所有元素进行操作，而这些操作可以被独立地改变而不需要改变这些元素的类。简单来说，就是把操作和数据分离，让操作可以独立地变化。在该模式中，数据结构提供一个接受访问者对象的方法，让访问者来处理数据结构中的元素。而访问者则会针对不同类型的元素，执行不同的操作。这样可以方便地增加新的操作，而不用修改已有的类。</li>
<li>组成<ul>
<li>Element：元素抽象类，定义了一个接受访问者的方法accept，这个方法接收一个访问者作为参数，让访问者处理这个元素。</li>
<li>Visitor：访问者抽象类，定义了一系列访问ConcreteElementA和ConcreteElementB的方法。这些方法参数中都包含了具体的元素对象，这样访问者就可以针对不同的元素对象做出不同的操作。</li>
<li>在实际的实现中，可能还会有一个ObjectStructure类来存储所有的元素对象，Visitor对象则在访问ObjectStructure的过程中，对其中的元素对象进行处理。但这并不是访问者模式的必要组成部分，可以根据实际情况来决定是否需要添加。</li>
</ul>
</li>
</ul>
<p>访问者模式的优点：</p>
<ul>
<li>增加新的操作方法很容易，只需要实现一个新的访问者即可，不需要修改元素类或已有的访问者。</li>
<li>将数据结构和处理逻辑分离开来，符合单一职责原则。</li>
<li>可以对原有的数据结构进行访问控制，只允许访问者访问特定的元素。</li>
</ul>
<p>访问者模式的缺点：</p>
<ul>
<li><p>增加新元素类型很困难，需要在所有访问者中添加相应的处理方法。</p>
</li>
<li><p>增加新的访问者会导致访问者类的数量增加，系统更加复杂。</p>
</li>
<li><p>访问者访问元素时，它们之间的关系是没有封装的，这可能会导致元素被破坏。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//元素抽象类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {<br>    <span class="hljs-comment">//通过一个方法让访问者可以访问</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span>;<br><br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Man</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span> {<br>        action.getManResult(<span class="hljs-built_in">this</span>);<br>    }<br>}<br><span class="hljs-comment">//这里我们使用到了双分派，即首先在客户端程序中，</span><br><span class="hljs-comment">// 将具体的状态作为参数传递到了Woman中完成了一次分派</span><br><span class="hljs-comment">// 然后Woman这个类里面调用了作为参数的具体方法中的方法getWomanResult</span><br><span class="hljs-comment">//同时将自己this作为参数传入，2完成第二次的分派</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Woman</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//接受action</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span> {<br>        <span class="hljs-comment">//把自己传进去</span><br>        action.getWomanResult(<span class="hljs-built_in">this</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>访问抽象类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Action</span> {<br>    <span class="hljs-comment">//得到男性的测评结果</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span>;<br>    <span class="hljs-comment">//得到女性的测评结果</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman man)</span>;<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> {<br>        System.out.println(<span class="hljs-string">"男人给的评价是该回家了"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman man)</span> {<br>        System.out.println(<span class="hljs-string">"女人给的评价是该回家了"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> {<br>        System.out.println(<span class="hljs-string">"男人给的评价是成功"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman man)</span> {<br>        System.out.println(<span class="hljs-string">"女人给的评价是很成功"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Wait</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span>{<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> {<br>        System.out.println(<span class="hljs-string">"男人表示回家等消息"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman man)</span> {<br>        System.out.println(<span class="hljs-string">"女人表示回家等消息"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>数据结构</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//数据结构，管理很多人</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStructure</span> {<br>    <span class="hljs-comment">//维护一个集合</span><br>    <span class="hljs-keyword">private</span>  List&lt;Person&gt; persons=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>    <span class="hljs-comment">//增加到list</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Person person)</span> {<br>        persons.add(person);<br>    }<br>    <span class="hljs-comment">//移除</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">(Person person)</span> {<br>        persons.remove(person);<br>    }<br>    <span class="hljs-comment">//显示测评情况</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">(Action action)</span>{<br>        <span class="hljs-keyword">for</span> (Person person : persons) {<br>            person.accept(action);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建ObjectStructure</span><br>        <span class="hljs-type">ObjectStructure</span> <span class="hljs-variable">objectStructure</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectStructure</span>();<br>        objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Man</span>());<br>        <span class="hljs-type">Fail</span> <span class="hljs-variable">fail</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fail</span>();<br>        <span class="hljs-comment">//查看当前结果</span><br>        objectStructure.display(fail);<br><br>        System.out.println(<span class="hljs-string">"&lt;==&gt;"</span>);<br>        objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Man</span>());<br>        <span class="hljs-type">Success</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Success</span>();<br>        objectStructure.display(success);<br>        System.out.println(<span class="hljs-string">"&lt;==&gt;"</span>);<br>        <span class="hljs-type">Wait</span> <span class="hljs-variable">wait</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Wait</span>();<br>        objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Woman</span>());<br>        objectStructure.display(wait);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>执行结果</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">男人给的评价是该回家了<br>&lt;==&gt;<br>男人给的评价是成功<br>男人给的评价是成功<br>&lt;==&gt;<br>男人表示回家等消息<br>男人表示回家等消息<br>女人表示回家等消息<br></code></pre></td></tr></tbody></table></figure>

<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/image-20230414220916979.png" srcset="/img/loading.gif" lazyload alt="image-20230414220916979"></p>
</li>
</ul>
<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><ul>
<li><p>迭代器模式（Iterator Pattern）是一种行为型设计模式，它提供了一种方法，可以顺序地访问一个聚合对象（如列表、树形结构等）中各个元素，而不必暴露该对象的内部表示。</p>
</li>
<li><p>在迭代器模式中，一般有两个关键角色：迭代器和聚合对象。</p>
</li>
<li><p>迭代器是一个遍历聚合对象的接口，具有 hasNext() 方法和 next() 方法。hasNext() 用于判断是否还有下一个元素，next() 用于取出下一个元素。</p>
</li>
<li><p>聚合对象是一个类或接口，它具有一个或多个方法，可以返回一个实现了迭代器接口的对象。这个迭代器对象可以用来遍历聚合对象中的元素。</p>
</li>
<li><p>迭代器模式的优点：</p>
<ul>
<li><p>可以遍历不同类型的聚合对象，而无需知道其内部结构，使得遍历算法与聚合对象解耦。</p>
</li>
<li><p>简化了遍历过程，使得代码更加简洁，对于复杂聚合对象的遍历尤为有效。</p>
</li>
</ul>
</li>
<li><p>迭代器模式的缺点：</p>
<ul>
<li><p>增加了新的聚合类和迭代器类，增加了系统的复杂度。</p>
</li>
<li><p>在遍历过程中，如果聚合对象发生了修改，可能会导致迭代器失效。</p>
</li>
</ul>
</li>
<li><p>迭代器模式适用于需要对聚合对象进行遍历操作的场景，例如需要对一个列表、树形结构、图形结构等数据结构进行遍历操作。迭代器模式可以将遍历算法和聚合对象分离开来，使得聚合对象可以进行任何修改，而不影响遍历算法。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Department</span> {<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>}<br><span class="hljs-comment">//学院</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">College</span> {<br>    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//增加系的方法</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span>;<br>    <span class="hljs-comment">//返回一个迭代器遍历</span><br>    Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span>;<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>学院</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerCollege</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">College</span>{<br>    Department[] departments;<br>    <span class="hljs-type">int</span> numOfDepartment=<span class="hljs-number">0</span>;<span class="hljs-comment">//保存当前数组的对象个数</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ComputerCollege</span><span class="hljs-params">()</span> {<br>        departments=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>[<span class="hljs-number">5</span>];<br>        addDepartment(<span class="hljs-string">"JAVA"</span>,<span class="hljs-string">"咖啡"</span>);<br>        addDepartment(<span class="hljs-string">"Python"</span>,<span class="hljs-string">"蟒蛇"</span>);<br>        addDepartment(<span class="hljs-string">"C"</span>,<span class="hljs-string">"语言"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"计算机学院"</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span> {<br>       departments[numOfDepartment]= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(name, desc);<br>       numOfDepartment++;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerCollageIterator</span>(departments);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InfoCollage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">College</span>{<br>    List&lt;Department&gt; departments;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InfoCollage</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.departments = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Department&gt;();<br>        <span class="hljs-built_in">this</span>.addDepartment(<span class="hljs-string">"信息安全"</span>,<span class="hljs-string">"安全"</span>);<br>        <span class="hljs-built_in">this</span>.addDepartment(<span class="hljs-string">"信息加密"</span>,<span class="hljs-string">"加密"</span>);<br>        <span class="hljs-built_in">this</span>.addDepartment(<span class="hljs-string">"信息盗取"</span>,<span class="hljs-string">"开盒"</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"信息工程学院"</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span> {<br>        departments.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(name, desc));<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InfoCollageIterator</span>(departments);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>迭代器</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerCollageIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span> {<br>    <span class="hljs-comment">//这里我们需要Department是以怎样的方式存放</span><br>    Department[] departments;<br>    <span class="hljs-type">int</span> position=<span class="hljs-number">0</span>;<span class="hljs-comment">//遍历的位置</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {<br>        <span class="hljs-comment">//判断是否还有下一个元素</span><br>        <span class="hljs-keyword">return</span> position &lt; departments.length &amp;&amp; departments[position] != <span class="hljs-literal">null</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> departments[position++];<br>    }<br>    <span class="hljs-comment">//删除的方法默认空实现</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {<br><br>    }<br>    <span class="hljs-keyword">public</span>  <span class="hljs-title function_">ComputerCollageIterator</span><span class="hljs-params">(Department[] departments)</span> {<br>        <span class="hljs-built_in">this</span>.departments = departments;<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InfoCollageIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span> {<br>    <span class="hljs-comment">//信息工程学院是以list存放系的</span><br>    List&lt;Department&gt; departments ;<br>    <span class="hljs-type">int</span> index=-<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InfoCollageIterator</span><span class="hljs-params">(List&lt;Department&gt; departments)</span> {<br>        <span class="hljs-built_in">this</span>.departments = departments;<br>    }<br>    <span class="hljs-comment">//判断集合还有没有下一个元素</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">if</span> (index &gt;=departments.size()-<span class="hljs-number">1</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<span class="hljs-keyword">else</span>{<br>            index++;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        }<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> departments.get(index);<br>    }<br>    <span class="hljs-comment">//空实现remove</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutPutImpl</span> {<br>    <span class="hljs-comment">//获取学院集合</span><br>    List&lt;College&gt; collegeList;<br><br>    <span class="hljs-comment">//需要一个构造器</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OutPutImpl</span><span class="hljs-params">(List&lt;College&gt; collegeList)</span> {<br>        <span class="hljs-built_in">this</span>.collegeList = collegeList;<br>    }<br>    <span class="hljs-comment">//遍历所有的学院,输出各个学院的系</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollage</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//从collageList取出所有的学院 java中的list已经实现了Iterator接口</span><br>        <span class="hljs-keyword">for</span> (College college : collegeList) {<br>            <span class="hljs-comment">//取出一个学院</span><br>            System.out.println(<span class="hljs-string">"学院名称==&gt;"</span> + college.getName());<br>            <span class="hljs-comment">//取出学院的Iterator</span><br>            <span class="hljs-type">Iterator</span> <span class="hljs-variable">collegeIterator</span> <span class="hljs-operator">=</span> college.createIterator();<br>            printDepartment(collegeIterator);<br>        }<br>    }<br>    <span class="hljs-comment">//输出，学院输出系</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDepartment</span><span class="hljs-params">(Iterator iterator)</span>{<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()){<br>            Department department=(Department) iterator.next();<br>            System.out.println(<span class="hljs-string">"系名称==&gt;"</span>+department.getName());<br>        }<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建学院</span><br>        List&lt;College&gt; collegeList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-type">ComputerCollege</span> <span class="hljs-variable">computerCollege</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerCollege</span>();<br>        <span class="hljs-type">InfoCollage</span> <span class="hljs-variable">infoCollage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InfoCollage</span>();<br>        collegeList.add(computerCollege);<br>        collegeList.add(infoCollage);<br>        <span class="hljs-type">OutPutImpl</span> <span class="hljs-variable">outPut</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutPutImpl</span>(collegeList);<br>        outPut.printCollage();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/ComputerCollege.png" srcset="/img/loading.gif" lazyload alt="ComputerCollege"></p>
</li>
</ul>
<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><ul>
<li><p>让多个对象可以观察一个对象，并在该对象发生更改时获取通知并做出响应。类似于我们订阅了某个YouTube频道，每当该频道发布新视频时，我们就会收到通知并可以在时间合适的情况下观看视频。在观察者模式中，主要包含两种角色：观察者和被观察者。被观察者负责发布通知，同时也可以添加和删除观察者。观察者则负责接收通知，并在需要时做出响应。该模式可以帮助我们实现松耦合的代码架构，有效地提高代码的可扩展性和灵活性。</p>
</li>
<li><p>观察者模式的优点</p>
<ul>
<li>它可以将主题与观察者解耦，使得主题与观察者可以独立的变化。此外，观察者模式可以很容易的添加或删除观察者，而不需要修改主题的代码。</li>
</ul>
</li>
<li><p>观察者模式的缺点</p>
<ul>
<li>当观察者太多时，通知所有观察者可能会导致性能问题。</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//被观察者接口，需要让WeatherData实现</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Subject</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerObserver</span><span class="hljs-params">(Observer observer)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeObserver</span><span class="hljs-params">(Observer observer)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span>;<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>观察者接口</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//观察者接口</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Observer</span> {<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> temperature 温度</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pressure 气压</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> humidity 湿度</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature,<span class="hljs-type">float</span> pressure,<span class="hljs-type">float</span> humidity)</span>;<br><br>}<br></code></pre></td></tr></tbody></table></figure>

<p>实现类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * WeatherData</span><br><span class="hljs-comment"> * 包含最新的天气情况信息</span><br><span class="hljs-comment"> * 含有观察者集合使用ArrayList管理</span><br><span class="hljs-comment"> * 当有数据有更新时，就主动调用ArrayList， 通知所有的接入方就看到最新消息</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> fj</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 2023/4/15 21:10</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Subject</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br>    <span class="hljs-comment">//观察者集合</span><br>    <span class="hljs-keyword">private</span> ArrayList&lt;Observer&gt; observers;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WeatherData</span><span class="hljs-params">()</span> {<br>        observers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Observer&gt;();<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataChange</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//调用接入方的update</span><br>        <span class="hljs-built_in">this</span>.notifyObservers();<br>    }<br>    <span class="hljs-comment">//当数据有更新时就调用setData</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setData</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature,<span class="hljs-type">float</span> pressure,<span class="hljs-type">float</span> humidity)</span>{<br>        <span class="hljs-built_in">this</span>.temperature=temperature;<br>        <span class="hljs-built_in">this</span>.pressure=pressure;<br>        <span class="hljs-built_in">this</span>.humidity=humidity;<br>        <span class="hljs-comment">//调用dataChange将最新的消息推送给接入方currentConditions</span><br>        dataChange();<br>    }<br>    <span class="hljs-comment">//注册一个观察者</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerObserver</span><span class="hljs-params">(Observer observer)</span> {<br>        observers.add(observer);<br>    }<br>    <span class="hljs-comment">//移除一个观察者</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeObserver</span><span class="hljs-params">(Observer observer)</span> {<br>        <span class="hljs-keyword">if</span> (observers.contains(observer)) observers.remove(observer);<br>    }<br>    <span class="hljs-comment">//遍历所有的观察者并通知</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">for</span> (Observer observer : observers){<br>            observer.update(getTemperature(),getPressure(),getHumidity());<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>具体观察者</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//观察者</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurrentConditions</span> <span class="hljs-keyword">implements</span>  <span class="hljs-title class_">Observer</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br>    <span class="hljs-comment">//更新天气情况由WeatherData 来调用，我使用推送模式</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span>{<br>        <span class="hljs-built_in">this</span>.temperature = temperature;<br>        <span class="hljs-built_in">this</span>.pressure = pressure;<br>        <span class="hljs-built_in">this</span>.humidity = humidity;<br>        display();<br>    }<br>    <span class="hljs-comment">//显示</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"温度=&gt;"</span>+temperature);<br>        System.out.println(<span class="hljs-string">"压力=&gt;"</span>+pressure);<br>        System.out.println(<span class="hljs-string">"湿度=&gt;"</span>+humidity);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaiduSite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br>    <span class="hljs-comment">//更新天气情况由WeatherData 来调用，我使用推送模式</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span>{<br>        <span class="hljs-built_in">this</span>.temperature = temperature;<br>        <span class="hljs-built_in">this</span>.pressure = pressure;<br>        <span class="hljs-built_in">this</span>.humidity = humidity;<br>        display();<br>    }<br>    <span class="hljs-comment">//显示</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"百度温度=&gt;"</span>+temperature);<br>        System.out.println(<span class="hljs-string">"百度压力=&gt;"</span>+pressure);<br>        System.out.println(<span class="hljs-string">"百度湿度=&gt;"</span>+humidity);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">//创建一个WeatherData</span><br>        <span class="hljs-type">WeatherData</span> <span class="hljs-variable">weatherData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherData</span>();<br>        <span class="hljs-comment">//创建观察者</span><br>        <span class="hljs-type">CurrentConditions</span> <span class="hljs-variable">currentConditions</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CurrentConditions</span>();<br>        <span class="hljs-type">BaiduSite</span> <span class="hljs-variable">baiduSite</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaiduSite</span>();<br>        weatherData.registerObserver(currentConditions);<br>        weatherData.registerObserver(baiduSite);<br>        <span class="hljs-comment">//测试</span><br>        System.out.println(<span class="hljs-string">"通知各个注册的观察者"</span>);<br>        weatherData.setData(<span class="hljs-number">10f</span>,<span class="hljs-number">100f</span>,<span class="hljs-number">30.3f</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">通知各个注册的观察者<br>温度=&gt;10.0<br>压力=&gt;100.0<br>湿度=&gt;30.3<br>百度温度=&gt;10.0<br>百度压力=&gt;100.0<br>百度湿度=&gt;30.3<br></code></pre></td></tr></tbody></table></figure>

<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.png" srcset="/img/loading.gif" lazyload alt="观察者模式"></p>
</li>
</ul>
<h3 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h3><ul>
<li><p>中介者模式是一种行为型设计模式，其目的是通过提供一个中介对象来简化对象之间的通信。在这种模式中，各个对象之间不直接相互交互，而是通过中介对象来进行交互。这使得各个对象之间的关系更加松散，也更容易扩展和修改。</p>
</li>
<li><p>中介者模式通常由一个中介对象和多个相关对象组成。中介者对象负责协调相关对象的交互，使它们能够有效地通信。当相关对象发生改变时，中介者对象可以将这些改变转发给其他相关对象，从而保持所有相关对象的状态一致性。</p>
</li>
<li><p>中介者模式常用于复杂的系统，尤其是那些对象之间存在大量相互依赖关系的系统中。其优点包括减少对象之间的耦合、提高系统的可复用性和可维护性、代码复杂性降低等。</p>
<p>中介者接口</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 定义了中介者接口，其中有一个sendMessage方法用于接收同事对象发送的消息，</span><br><span class="hljs-comment"> * 并将消息传递给其他的同事对象。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// 中介者接口</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Mediator</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message, Colleague sender)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>中介者接口的实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 实现了中介者接口，</span><br><span class="hljs-comment"> * 其中保存了对所有同事对象的引用。</span><br><span class="hljs-comment"> * 当有同事对象发送消息时，</span><br><span class="hljs-comment"> * 根据消息的来源不同将消息传递给不同的同事对象。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// 具体中介者类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Mediator</span> {<br>    <span class="hljs-keyword">private</span> ColleagueA colleagueA;<br>    <span class="hljs-keyword">private</span> ColleagueB colleagueB;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setColleagueA</span><span class="hljs-params">(ColleagueA colleagueA)</span> {<br>        <span class="hljs-built_in">this</span>.colleagueA = colleagueA;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setColleagueB</span><span class="hljs-params">(ColleagueB colleagueB)</span> {<br>        <span class="hljs-built_in">this</span>.colleagueB = colleagueB;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message, Colleague sender)</span> {<br>        <span class="hljs-keyword">if</span> (sender == colleagueA) {<br>            colleagueB.receiveMessage(message);<br>        } <span class="hljs-keyword">else</span> {<br>            colleagueA.receiveMessage(message);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>同事抽象类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 定义了抽象同事类，</span><br><span class="hljs-comment"> * 其中保存了对中介者对象的引用，</span><br><span class="hljs-comment"> * 并声明了两个抽象方法：sendMessage和receiveMessage。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// 抽象同事类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span> {<br>    <span class="hljs-keyword">protected</span> Mediator mediator;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Colleague</span><span class="hljs-params">(Mediator mediator)</span> {<br>        <span class="hljs-built_in">this</span>.mediator = mediator;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receiveMessage</span><span class="hljs-params">(String message)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>同事抽象类的实现</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 具体实现了同事类A，</span><br><span class="hljs-comment"> * 实现了sendMessage方法并在其中通过中介者对象将消息发送给其他的同事对象。</span><br><span class="hljs-comment"> * 同时，实现了receiveMessage方法，用于接收其他同事对象的消息。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">// 具体同事类A</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ColleagueA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ColleagueA</span><span class="hljs-params">(Mediator mediator)</span> {<br>        <span class="hljs-built_in">super</span>(mediator);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {<br>        mediator.sendMessage(message, <span class="hljs-built_in">this</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receiveMessage</span><span class="hljs-params">(String message)</span> {<br>        System.out.println(<span class="hljs-string">"ColleagueA received message: "</span> + message);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ColleagueB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ColleagueB</span><span class="hljs-params">(Mediator mediator)</span> {<br>        <span class="hljs-built_in">super</span>(mediator);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {<br>        mediator.sendMessage(message, <span class="hljs-built_in">this</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receiveMessage</span><span class="hljs-params">(String message)</span> {<br>        System.out.println(<span class="hljs-string">"ColleagueB received message: "</span> + message);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-type">ConcreteMediator</span> <span class="hljs-variable">mediator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteMediator</span>();<br><br>        <span class="hljs-type">ColleagueA</span> <span class="hljs-variable">colleagueA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColleagueA</span>(mediator);<br>        <span class="hljs-type">ColleagueB</span> <span class="hljs-variable">colleagueB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColleagueB</span>(mediator);<br><br>        mediator.setColleagueA(colleagueA);<br>        mediator.setColleagueB(colleagueB);<br><br>        colleagueA.sendMessage(<span class="hljs-string">"Hello colleagueB!"</span>);<br><br>        colleagueB.sendMessage(<span class="hljs-string">"Hi colleagueA!"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>在客户端代码中，创建了一个具体中介者对象和两个具体同事对象，并将它们注册到中介者对象中。然后，两个具体同事对象分别向对方发送消息。运行这段代码，我们会看到如下的输出结果：</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">ColleagueB received message: Hello colleagueB!<br>ColleagueA received message: Hi colleagueA!<br></code></pre></td></tr></tbody></table></figure>

<p>说明同事对象之间通过中介者对象成功地进行了通信。</p>
<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/ConcreteMediator.png" srcset="/img/loading.gif" lazyload alt="ConcreteMediator"></p>
<p>优点：</p>
<ol>
<li>减少了对象之间的紧密耦合关系，增强了灵活性和可维护性。</li>
<li>通过引入中介者对象，简化了对象之间的交互流程，降低了系统的复杂度。</li>
<li>可以使对象之间的关系更加松散，有助于在系统中更好地进行分布式开发。</li>
<li>可以降低系统的耦合度，使得系统更加易于修改和扩展。</li>
</ol>
<p>缺点：</p>
<ol>
<li>引入中介者对象会增加系统的复杂度，使得系统的整体结构更加抽象化。</li>
<li>中介者对象会集中承载系统的交互逻辑，可能会成为系统的瓶颈。</li>
<li>在某些情况下，中介者对象可能会过度膨胀，变得庞大且难以维护。</li>
</ol>
<p>总之，中介者模式适合于系统中对象之间的交互复杂度较高、相互之间关系紧密、耦合度较大的情况。如果系统的交互复杂度较低，或者对象之间的交互关系较为简单，中介者模式可能就过于复杂了，不适合使用。</p>
</li>
</ul>
<h3 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h3><ul>
<li><p>备忘录模式是一种行为型模式，它允许在不破坏对象封装的前提下捕获并保存其内部状态，并在需要时进行恢复。它由三个核心组件组成：备忘录、发起人和管理者。</p>
<ul>
<li><p>备忘录（Memento）：负责存储发起人的内部状态。</p>
</li>
<li><p>发起人（Originator）：负责创建备忘录，并将其内部状态保存到备忘录中。</p>
</li>
<li><p>管理者（Caretaker）：负责存储和管理备忘录。</p>
</li>
</ul>
</li>
<li><p>备忘录模式的主要思想是：</p>
<ul>
<li>将要保存的对象的状态封装成备忘录对象，由发起人创建备忘录对象并将其存储在管理者中，当需要恢复对象状态时，由管理者返回备忘录对象并让发起人将其内部状态恢复为备忘录中存储的状态。这样可以避免直接操作对象导致的封装破坏，同时也可以将对象的状态保存到磁盘或数据库等外部存储器中。</li>
</ul>
</li>
<li><p>优点：</p>
<ul>
<li>它可以使对象状态的保存和恢复更加灵活、简单和安全，同时可以避免在对象外部直接访问其内部状态造成的封装破坏。</li>
</ul>
</li>
<li><p>缺点：</p>
<ul>
<li>它可能会对系统的性能产生影响，尤其是在备忘录对象较多、备忘录对象较大时。</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//备忘录</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> {<br>    <span class="hljs-keyword">private</span> String state;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Memento</span><span class="hljs-params">(String state)</span> {<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.state = state;<br>    }<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> state;<br>    }<br>}<br><span class="hljs-comment">//发起人</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Originator</span> {<br>    <span class="hljs-keyword">private</span> String state;<br>    <span class="hljs-comment">//编写一个方法，可以保存一个状态对象Memento</span><br>    <span class="hljs-comment">//因此编写一个方法返回一个memento</span><br>    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">saveStateMemento</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(state);<br>    }<br>    <span class="hljs-comment">//通过备忘录对象，回复状态</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getStateFromMemento</span><span class="hljs-params">(Memento memento)</span>{<br>        state= memento.getState();<br>    }<br>}<br><span class="hljs-comment">//备忘录管理</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> {<br>    <span class="hljs-keyword">private</span> List&lt;Memento&gt; mementoList=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Memento&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addMemento</span><span class="hljs-params">(Memento m)</span> {<br>        mementoList.add(m);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Memento m)</span> {<br>        mementoList.remove(m);<br>    }<br>    <span class="hljs-comment">//获取第index个Originator的备忘录对象</span><br>    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>{<br>        <span class="hljs-keyword">return</span> mementoList.get(index);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javav">public class Client {<br>    public static void main(String[] args) {<br>        Originator originator = new Originator();<br>        Caretaker caretaker = new Caretaker();<br>        originator.setState("状态1");<br>        //保存了当前的状态<br>        Memento memento = originator.saveStateMemento();<br>        caretaker.addMemento(memento);<br>        System.out.println(originator.getState());<br><br>        originator.setState("状态2");<br>        caretaker.addMemento(originator.saveStateMemento());<br>        System.out.println(originator.getState());<br>        //回复到状态1<br>        Memento memento1 = caretaker.get(0);<br>        originator.getStateFromMemento(memento1);<br>        System.out.println(originator.getState());<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">状态<span class="hljs-number">1</span><br>状态<span class="hljs-number">2</span><br>状态<span class="hljs-number">1</span><br></code></pre></td></tr></tbody></table></figure>

<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/%E5%A4%87%E5%BF%98%E5%BD%95.png" srcset="/img/loading.gif" lazyload alt="备忘录"></p>
</li>
</ul>
<h3 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h3><p>解释器模式是一种行为型模式，它定义了一组语法规则并描述了这些规则如何解释这些语言表达式。它由四个主要组成部分组成：抽象表达式、终结符表达式、非终结符表达式和上下文。</p>
<ul>
<li>抽象表达式（Abstract Expression）：抽象类或接口，它定义了一个抽象的解释操作interpret()方法，用于对自身进行解释。</li>
<li>终结符表达式（Terminal Expression）：终结符表达式是一个实现了抽象表达式的类，它是一种基本表达式，不能再分解为更小的元素。</li>
<li>非终结符表达式（Nonterminal Expression）：非终结符表达式是一个实现了抽象表达式的类，它由多个终结符表达式和/或其他非终结符表达式组合而成，用于表示复杂的解释操作。</li>
<li>上下文（Context）：上下文是一个环境类，它存储了要解释的语言表达式。</li>
</ul>
<p>解释器模式的主要思想是：</p>
<ul>
<li>将语言的语法规则通过面向对象的方式进行描述，对每个非终结符表达式定义一个解释操作，在解释操作中定义该非终结符表达式的语法规则，并递归调用其组成部分的解释操作，从而实现整个语言表达式的解释。该模式使得添加新规则和表达式变得简单，只需要添加相应的类和方法即可，同时也增强了语言解析的灵活性。</li>
</ul>
<p>解释器模式的优缺点：</p>
<ul>
<li>它使得语言解析的逻辑能够独立于语法规则的表达式层次结构而变化，易于扩展、易于实现，同时也有利于优化解释器的性能。其缺点是：当语法规则变得复杂时，可能会导致类的数量急剧增加，系统变得更加复杂难以维护。</li>
</ul>
<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><p>状态模式是一种行为型设计模式，它允许一个对象在其内部状态改变时改变它的行为。</p>
<p>状态模式的核心理念是：将对象的所有状态都封装成一个个的对象，即状态对象，当对象的状态发生改变时，就切换到另一个状态对象。</p>
<p>该模式实现时通常涉及到几个角色：</p>
<ul>
<li>环境类(Context)：用于维护当前状态，可以拥有一个状态接口的引用，以便通过调用 State 接口的方法来更新状态，并将控制权交给新的状态对象。</li>
<li>抽象状态(State)：定义状态所支持的接口，用于在系统的不同状态下的行为进行抽象定义。</li>
<li>具体状态(ConcreteState)：实现了抽象状态接口，并定义其内部状态的行为。</li>
</ul>
<p>下面我们通过一个简单的例子来演示状态模式如何工作。</p>
<p>假设我们有一个购物车(Cart)对象，它具有“未付款”和“已付款”两种状态，每个状态下会有不同的行为，比如在未付款状态下，我们可以添加商品、删除商品、查看购物车等行为，而在已付款状态下，只能查看购物车。</p>
<p>首先，我们定义了一个 CartState 接口作为状态类的基类，里面包含了两个方法：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CartState</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(String product)</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">viewCart</span><span class="hljs-params">()</span>;<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>然后我们实现两个具体状态类 UnpaidState（未付款状态），PaidState（已付款状态），并分别实现 CartState 接口的方法。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnpaidState</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CartState</span> {<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(String product)</span> {<br>        products.add(product);<br>        System.out.println(product + <span class="hljs-string">"添加到购物车中"</span>);<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">viewCart</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"--- 你的购物车物品列表 ---"</span>);<br>        <span class="hljs-keyword">for</span> (String product : products) {<br>            System.out.println(product);<br>        }<br>        System.out.println(<span class="hljs-string">"--- 总计： $"</span> + products.size() + <span class="hljs-string">" ---"</span>);<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaidState</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CartState</span> {<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(String product)</span> {<br>        System.out.println(<span class="hljs-string">"你已经付款，不能再添加商品！"</span>);<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">viewCart</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"--- 你的购物车物品列表 ---"</span>);<br>        <span class="hljs-keyword">for</span> (String product : products) {<br>            System.out.println(product);<br>        }<br>        System.out.println(<span class="hljs-string">"--- 总计： $"</span> + products.size() + <span class="hljs-string">" ---"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>最后，我们定义 Cart 类，并且实现状态的切换方法。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cart</span> {<br>    <span class="hljs-keyword">private</span> CartState currentState;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cart</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.currentState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnpaidState</span>();<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(CartState state)</span> {<br>        <span class="hljs-built_in">this</span>.currentState = state;<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(String product)</span> {<br>        <span class="hljs-built_in">this</span>.currentState.addProduct(product);<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">viewCart</span><span class="hljs-params">()</span> {<br>        <span class="hljs-built_in">this</span>.currentState.viewCart();<br>    }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-type">Cart</span> <span class="hljs-variable">cart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cart</span>();<br><br>        cart.addProduct(<span class="hljs-string">"Product 1"</span>);<br>        cart.addProduct(<span class="hljs-string">"Product 2"</span>);<br>        cart.addProduct(<span class="hljs-string">"Product 3"</span>);<br>        <br>        cart.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaidState</span>());<br>        <br>        cart.addProduct(<span class="hljs-string">"Product 4"</span>);<br>        cart.viewCart();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>在这个例子中，我们演示了状态模式如何工作。我们创建了 CartState 接口，并使用 UnpaidState 和 PaidState 实例来实现其状态。在 Cart 类中，我们使用 currentState 对象来保持 Cart 的状态，并使用 setState() 方法将其状态改变，并调用 addProduct() 和 viewCart() 方法来演示系统的不同状态下的行为。</p>
<p>这样，我们就成功实现了一个简单的状态模式示例。</p>
<h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><p>策略模式是一种行为型设计模式，它允许在运行时根据具体情况或需求选择不同的算法或策略。</p>
<p>策略模式的核心思想是将不同的算法或策略封装成独立的类，使得它们可以互相替换，而客户端代码不会受到任何影响。策略模式通常涉及到三个角色：</p>
<ul>
<li>环境(Context)：持有一个策略类的引用，它会根据具体情况调用相应的策略类来执行任务。</li>
<li>抽象策略(Strategy)：定义了一个公共接口，所有的具体策略都必须实现此接口。</li>
<li>具体策略(ConcreteStrategy)：实现了抽象策略接口，并提供了不同的算法或策略。</li>
</ul>
<p>优点：</p>
<ol>
<li>策略模式可以提高代码的可扩展性，使得系统更加灵活，易于维护和扩展。</li>
<li>策略模式可以将算法的实现与使用分离，客户端代码只需关注算法的接口，而不需要了解算法的具体实现。</li>
<li>策略模式可以降低系统的耦合度，不同的策略实现都仅仅有一个公共的接口，使得它们可以相互替换，减少了代码之间的依赖和耦合。</li>
<li>策略模式可以避免出现庞大的条件语句，代码更清晰、简洁。</li>
</ol>
<p>缺点：</p>
<ol>
<li>策略模式会增加代码的数量，因为每个策略都需要一个具体实现类。</li>
<li>策略模式会增加代码结构的复杂度，因为需要创建一系列的策略类和环境类，并且需要客户端去选择使用不同的策略。</li>
<li>在某些情况下，使用策略模式可能会导致性能降低，因为客户端可能需要动态选择不同的策略，而切换策略时会产生额外的开销。</li>
</ol>
<p>抽象策略</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FlyBehavior</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>;<span class="hljs-comment">//子类具体实现</span><br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span> {<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"不善于飞翔的鸭子"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"擅长飞行的鸭子"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"不善于飞翔的鸭子"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>环境角色</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> {<br>    <span class="hljs-comment">//属性，策略接口</span><br>    FlyBehavior flyBehavior;<br>    <span class="hljs-comment">//其他属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Duck</span><span class="hljs-params">()</span>{<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disPlay</span><span class="hljs-params">()</span>;<span class="hljs-comment">//显示鸭子信息</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"鸭子叫"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"鸭子会游泳"</span>);<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">if</span> (flyBehavior!=<span class="hljs-literal">null</span>){<br>            flyBehavior.fly();<br>        }<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFlyBehavior</span><span class="hljs-params">(FlyBehavior flyBehavior)</span> {<br>        <span class="hljs-built_in">this</span>.flyBehavior = flyBehavior;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>具体策略角色</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToyDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ToyDuck</span><span class="hljs-params">()</span> {<br>        flyBehavior=<span class="hljs-keyword">new</span> <span class="hljs-title class_">NoFlyBehavior</span>();<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disPlay</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"玩具鸭"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WildDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span>{<br>    <span class="hljs-comment">//构造器传入FlyBehavior</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WildDuck</span><span class="hljs-params">()</span> {<br>        flyBehavior=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GoodFlyBehavior</span>();<br>    }<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disPlay</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"野鸭子"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeiJinDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BeiJinDuck</span><span class="hljs-params">()</span> {<br>        flyBehavior=<span class="hljs-keyword">new</span> <span class="hljs-title class_">NoFlyBehavior</span>();<br>    }<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disPlay</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"北京鸭子"</span>);<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure>

<p>类图</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.png" srcset="/img/loading.gif" lazyload alt="策略模式"></p>
<h3 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h3><ul>
<li><p>责任链模式（Chain of Responsibility）是一种行为型设计模式。它通过将请求的发送者和接收者解耦，使得多个对象都有机会处理请求。将这些对象串成一条链，并沿着这条链传递请求，知道有一个对象处理它为止。即将能够处理同一件事情的对象连成一条责任链，所提交的请求沿着这条链传递，直到有一个对象处理它，这样既可以提高系统的灵活性和可扩展性，又可以降低系统的耦合度。</p>
</li>
<li><p>在责任链模式中，一般会设计出一个抽象处理者类，然后定义出一些具体的处理者类。每个具体的处理者类都应该包含一个指向下一个处理者的引用，从而形成一个链式结构，用户向处理者对象提交请求，处理者对象对请求进行处理，如果它不能处理此请求，则将请求的处理权交给下一个处理者对象，直到请求被处理完毕。</p>
</li>
</ul>
<p>责任链模式优点如下：</p>
<ol>
<li>解耦逻辑 - 将请求发送者和接收者解耦，使得多个对象都有机会处理请求，客户端不需要知道请求被处理的具体过程，方便维护和修改。</li>
<li>增强系统的灵活性 - 可以在运行时动态添加或者删除责任链上的对象，改变处理请求的顺序，灵活性大大增强。</li>
<li>提高代码的可扩展性 - 可以增加或更换责任链上的处理者类，方便扩展或修改业务逻辑。</li>
</ol>
<p>责任链模式缺点如下：</p>
<ol>
<li>不能保证请求一定被处理 - 对于链中处理者对象都没有处理该请求的情况，需要提供默认的处理方式，否则该请求将得不到处理。</li>
<li>对性能有一定影响 - 请求处理时需要穿透整个责任链，直到找到能够处理该请求的节点，这样会对性能产生一定的影响。</li>
<li>容易造成循环调用 - 如果设计不当，可能会造成循环调用问题，导致系统崩溃。</li>
</ol>
<p>抽象处理者</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Approve</span> {<br>    Approve approve;<span class="hljs-comment">//下一个处理者</span><br>    String name;<span class="hljs-comment">//名字</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Approve</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">this</span>.name=name;<br>    }<br>    <span class="hljs-comment">//下一个处理者</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Approve</span><span class="hljs-params">(Approve approve)</span> {<br>        <span class="hljs-built_in">this</span>.approve = approve;<br>    }<br>    <span class="hljs-comment">//处理审批请求的方法，得到一个请求，处理是子类完成，因此该方法做成抽象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span>;<br><br>}<br></code></pre></td></tr></tbody></table></figure>

<p>具体处理者</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DepartmentApprove</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approve</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DepartmentApprove</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">super</span>(name);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest pur)</span> {<br>        <span class="hljs-keyword">if</span>(pur.getPrice()&lt;=<span class="hljs-number">5000</span>){<br>            System.out.println(<span class="hljs-string">"请求编号"</span>+pur.getId()+<span class="hljs-string">"被"</span>+<span class="hljs-built_in">this</span>.name+<span class="hljs-string">"处理"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            approve.processRequest(pur);<br>        }<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollageApprove</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approve</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CollageApprove</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">super</span>(name);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest pur)</span> {<br>        <span class="hljs-keyword">if</span>(pur.getPrice()&gt;<span class="hljs-number">5000</span>&amp;&amp;pur.getPrice()&lt;=<span class="hljs-number">10000</span>){<br>            System.out.println(<span class="hljs-string">"请求编号"</span>+pur.getId()+<span class="hljs-string">"被"</span>+<span class="hljs-built_in">this</span>.name+<span class="hljs-string">"处理"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            approve.processRequest(pur);<br>        }<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViceSchoolMasterApprove</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approve</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViceSchoolMasterApprove</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">super</span>(name);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest pur)</span> {<br>        <span class="hljs-keyword">if</span>(pur.getPrice()&gt;<span class="hljs-number">1000</span>&amp;&amp;pur.getPrice()&lt;=<span class="hljs-number">30000</span>){<br>            System.out.println(<span class="hljs-string">"请求编号"</span>+pur.getId()+<span class="hljs-string">"被"</span>+<span class="hljs-built_in">this</span>.name+<span class="hljs-string">"处理"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            approve.processRequest(pur);<br>        }<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SchoolMasterApprove</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approve</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SchoolMasterApprove</span><span class="hljs-params">(String name)</span> {<br>        <span class="hljs-built_in">super</span>(name);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest pur)</span> {<br>        <span class="hljs-keyword">if</span>(pur.getPrice()&gt;<span class="hljs-number">30000</span>){<br>            System.out.println(<span class="hljs-string">"请求编号"</span>+pur.getId()+<span class="hljs-string">"被"</span>+<span class="hljs-built_in">this</span>.name+<span class="hljs-string">"处理"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            approve.processRequest(pur);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>请求</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PurchaseRequest</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> type=<span class="hljs-number">0</span>;<span class="hljs-comment">//请求类型</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> price=<span class="hljs-number">0.0f</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id=<span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PurchaseRequest</span><span class="hljs-params">(<span class="hljs-type">int</span> type,<span class="hljs-type">float</span> price, <span class="hljs-type">int</span> id)</span> {<br>        <span class="hljs-built_in">this</span>.type = type;<br>        <span class="hljs-built_in">this</span>.price = price;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>客户端</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">// 创建一个请求</span><br>        <span class="hljs-type">PurchaseRequest</span> <span class="hljs-variable">purchaseRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PurchaseRequest</span>(<span class="hljs-number">1</span>, <span class="hljs-number">33100</span>, <span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//创建相关审批人</span><br>        <span class="hljs-type">DepartmentApprove</span> <span class="hljs-variable">departmentApprove</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DepartmentApprove</span>(<span class="hljs-string">"主任"</span>);<br>        <span class="hljs-type">CollageApprove</span> <span class="hljs-variable">collageApprove</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CollageApprove</span>(<span class="hljs-string">"院长"</span>);<br>        <span class="hljs-type">ViceSchoolMasterApprove</span> <span class="hljs-variable">viceSchoolMasterApprove</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViceSchoolMasterApprove</span>(<span class="hljs-string">"副校长"</span>);<br>        <span class="hljs-type">SchoolMasterApprove</span> <span class="hljs-variable">schoolMasterApprove</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SchoolMasterApprove</span>(<span class="hljs-string">"校长"</span>);<br>        <span class="hljs-comment">//需要将各个审批的下一个处理者设置好 构成一个环形</span><br>        departmentApprove.setApprove(collageApprove);<br>        collageApprove.setApprove(viceSchoolMasterApprove);<br>        viceSchoolMasterApprove.setApprove(schoolMasterApprove);<br>        schoolMasterApprove.setApprove(departmentApprove);<br>        viceSchoolMasterApprove.processRequest(purchaseRequest);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>输出</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">请求编号<span class="hljs-number">1</span>被校长处理<br></code></pre></td></tr></tbody></table></figure>

<p>无论谁调用processRequest()方法，请求都能被对应的请求处理类处理</p>
<p><img src="https://freelooptc.oss-cn-shenzhen.aliyuncs.com/%E8%B4%A3%E4%BB%BB%E9%93%BE.png" srcset="/img/loading.gif" lazyload alt="责任链"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/java%E5%90%8E%E7%AB%AF/" class="category-chain-item">java后端</a>
  
  
    <span>></span>
    
  <a href="/categories/java%E5%90%8E%E7%AB%AF/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="category-chain-item">设计模式</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#设计模式</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>设计模式笔记</div>
      <div>http://freel00p.github.io/2023/04/17/设计模式笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>FreeL00P</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年4月17日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/05/21/%E7%A7%BB%E5%8A%A8%E4%BA%92%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0/" title="移动互联网笔记">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">移动互联网笔记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/04/05/Mybatis%E7%AC%94%E8%AE%B0/" title="Mybatis笔记">
                        <span class="hidden-mobile">Mybatis笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      

    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
